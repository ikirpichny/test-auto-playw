LavaPack.loadBundle([[38,{"../../../shared/constants/network":4190,"../constants/contracts":5,"./util":97,"@ethersproject/contracts":452,"@ethersproject/providers":483,"@metamask/eth-query":1188,"@metamask/obs-store":1494,lodash:3509,loglevel:3515,pify:3654,"single-call-balance-checker-abi":3992,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=m(e("@metamask/eth-query")),i=e("uuid"),s=e("@metamask/obs-store"),a=m(e("loglevel")),o=m(e("pify")),c=e("@ethersproject/providers"),u=e("@ethersproject/contracts"),l=m(e("single-call-balance-checker-abi")),d=e("lodash"),h=e("../../../shared/constants/network"),p=e("../constants/contracts"),f=e("./util");function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){_(e,t),t.add(e)}function y(e,t,n){_(e,t),t.set(e,n)}function _(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function w(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,S(e,t,"get"))}function v(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,S(e,t,"set"),n),n}function S(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var E=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,A=new WeakMap,P=new WeakSet,x=new WeakSet,R=new WeakSet,C=new WeakSet,I=new WeakMap,O=new WeakSet,N=new WeakSet,j=new WeakSet;function L(e){if(e){const t=this.getNetworkClientById(e);return{chainId:t.configuration.chainId,provider:t.provider,blockTracker:t.blockTracker,identifier:this.getNetworkIdentifier(t.configuration)}}return{chainId:this.getCurrentChainId(),provider:w(this,k),blockTracker:w(this,M),identifier:this.getNetworkIdentifier()}}function D(e){if(w(this,T)[e])return;const{blockTracker:t}=b(this,P,L).call(this,e),n=b(this,O,q).bind(this,e);t.addListener("latest",n),w(this,T)[e]=n,this.updateAccounts(e)}function U(e){if(!w(this,T)[e])return;const{blockTracker:t}=b(this,P,L).call(this,e);t.removeListener("latest",w(this,T)[e]),delete w(this,T)[e]}function B(e){const{accounts:t,accountsByChainId:n}=this.store.getState();if(n[e])return(0,d.cloneDeep)(n[e]);const r={};return Object.keys(t).forEach((e=>{r[e]={}})),r}async function q(e,t){const{chainId:n,provider:i}=b(this,P,L).call(this,e);w(this,A)[n]=t;const s=await(0,o.default)(new r.default(i)).getBlockByNumber(t,!1);if(!s)return;const c=s.gasLimit,{currentBlockGasLimitByChainId:u}=this.store.getState();this.store.updateState({...n===this.getCurrentChainId()&&{currentBlockGasLimit:c},currentBlockGasLimitByChainId:{...u,[n]:c}});try{await this.updateAccounts(e)}catch(e){a.default.error(e)}}async function F(e,t,n){const{useMultiAccountBalanceChecker:i}=this.preferencesController.store.getState();let s="0x0";try{s=await(0,o.default)(new r.default(t)).getBalance(e)}catch(e){var a;if("eth_getBalance"!==(null===(a=e.data)||void 0===a||null===(a=a.request)||void 0===a?void 0:a.method))throw e}const c={address:e,balance:s},u=b(this,C,B).call(this,n);if(!u[e])return;let l=u;i||(l={},Object.keys(u).forEach((t=>{e!==t&&(l[t]={address:t,balance:null})}))),l[e]=c;const{accountsByChainId:d}=this.store.getState();this.store.updateState({...n===this.getCurrentChainId()&&{accounts:l},accountsByChainId:{...d,[n]:l}})}async function $(e,t,n,r){const i=await new u.Contract(t,l.default,new c.Web3Provider(n)),s=["0x0000000000000000000000000000000000000000"];try{const t=await i.balances(e,s),n=b(this,C,B).call(this,r),a={};Object.keys(n).forEach((t=>{e.includes(t)||(a[t]={address:t,balance:null})})),e.forEach(((e,n)=>{const r=t[n]?t[n].toHexString():"0x0";a[e]={address:e,balance:r}}));const{accountsByChainId:o}=this.store.getState();this.store.updateState({...r===this.getCurrentChainId()&&{accounts:a},accountsByChainId:{...o,[r]:a}})}catch(t){a.default.warn("MetaMask - Account Tracker single call balance fetch failed",t),Promise.allSettled(e.map((e=>b(this,N,F).call(this,e,n,r))))}}n.default=class{constructor(e={}){g(this,j),g(this,N),g(this,O),g(this,C),g(this,R),g(this,x),g(this,P),y(this,E,{writable:!0,value:new Map}),y(this,T,{writable:!0,value:{}}),y(this,k,{writable:!0,value:null}),y(this,M,{writable:!0,value:null}),y(this,A,{writable:!0,value:{}}),y(this,I,{writable:!0,value:async e=>{await b(this,O,q).call(this,null,e)}});const t={accounts:{},currentBlockGasLimit:"",accountsByChainId:{},currentBlockGasLimitByChainId:{}};this.store=new s.ObservableStore({...t,...e.initState}),this.resetState=()=>{this.store.updateState(t)},v(this,k,e.provider),v(this,M,e.blockTracker),this.getCurrentChainId=e.getCurrentChainId,this.getNetworkClientById=e.getNetworkClientById,this.getNetworkIdentifier=e.getNetworkIdentifier,this.preferencesController=e.preferencesController,this.onboardingController=e.onboardingController,this.controllerMessenger=e.controllerMessenger,e.onAccountRemoved((e=>this.removeAccounts([e]))),this.onboardingController.store.subscribe((0,f.previousValueComparator)((async(e,t)=>{const{completedOnboarding:n}=e,{completedOnboarding:r}=t;!n&&r&&this.updateAccountsAllActiveNetworks()}),this.onboardingController.store.getState())),this.selectedAccount=this.controllerMessenger.call("AccountsController:getSelectedAccount"),this.controllerMessenger.subscribe("AccountsController:selectedAccountChange",(e=>{const{useMultiAccountBalanceChecker:t}=this.preferencesController.store.getState();this.selectedAccount.id===e.id||t||(this.selectedAccount=e,this.updateAccountsAllActiveNetworks())}))}start(){v(this,A,{[this.getCurrentChainId()]:w(this,M).getCurrentBlock()}),w(this,M).once("latest",(e=>{w(this,A)[this.getCurrentChainId()]=e})),w(this,M).removeListener("latest",w(this,I)),w(this,M).addListener("latest",w(this,I)),this.updateAccounts()}stop(){w(this,M).removeListener("latest",w(this,I))}startPollingByNetworkClientId(e){const t=(0,i.v4)(),n=w(this,E).get(e);if(n)n.add(t);else{const n=new Set;n.add(t),w(this,E).set(e,n),b(this,x,D).call(this,e)}return t}stopAllPolling(){this.stop(),w(this,E).forEach(((e,t)=>{e.forEach((e=>{this.stopPollingByPollingToken(e)}))}))}stopPollingByPollingToken(e){if(!e)throw new Error("pollingToken required");let t=!1;if(w(this,E).forEach(((n,r)=>{n.has(e)&&(t=!0,n.delete(e),0===n.size&&(w(this,E).delete(r),b(this,R,U).call(this,r)))})),!t)throw new Error("pollingToken not found")}syncWithAddresses(e){const{accounts:t}=this.store.getState(),n=Object.keys(t),r=[];e.forEach((e=>{n.includes(e)||r.push(e)}));const i=[];n.forEach((t=>{e.includes(t)||i.push(t)})),this.addAccounts(r),this.removeAccounts(i)}addAccounts(e){const{accounts:t,accountsByChainId:n}=this.store.getState(),r=(0,d.cloneDeep)(t),i=(0,d.cloneDeep)(n);e.forEach((e=>{r[e]={}})),Object.keys(i).forEach((t=>{e.forEach((e=>{i[t][e]={}}))})),this.store.updateState({accounts:r,accountsByChainId:i}),w(this,A)[this.getCurrentChainId()]&&this.updateAccounts(),w(this,E).forEach(((e,t)=>{const{chainId:n}=b(this,P,L).call(this,t);w(this,A)[n]&&this.updateAccounts(t)}))}removeAccounts(e){const{accounts:t,accountsByChainId:n}=this.store.getState(),r=(0,d.cloneDeep)(t),i=(0,d.cloneDeep)(n);e.forEach((e=>{delete r[e]})),Object.keys(i).forEach((t=>{e.forEach((e=>{delete i[t][e]}))})),this.store.updateState({accounts:r,accountsByChainId:i})}clearAccounts(){this.store.updateState({accounts:{},accountsByChainId:{[this.getCurrentChainId()]:{}}})}async updateAccountsAllActiveNetworks(){await this.updateAccounts(),await Promise.all(Array.from(w(this,E)).map((([e])=>this.updateAccounts(e))))}async updateAccounts(e){const{completedOnboarding:t}=this.onboardingController.store.getState();if(!t)return;const{chainId:n,provider:r,identifier:i}=b(this,P,L).call(this,e),{useMultiAccountBalanceChecker:s}=this.preferencesController.store.getState();let a=[];if(s){const{accounts:e}=this.store.getState();a=Object.keys(e)}else{a=[this.controllerMessenger.call("AccountsController:getSelectedAccount").address]}const o=p.SINGLE_CALL_BALANCES_ADDRESSES[n];i!==h.LOCALHOST_RPC_URL&&"http://127.0.0.1:8545"!==i&&o?await b(this,j,$).call(this,a,o,r,n):await Promise.all(a.map((e=>b(this,N,F).call(this,e,r,n))))}}}}},{package:"$root$",file:"app/scripts/lib/account-tracker.js"}],[3891,{"readable-stream":3906},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ReadableWebToNodeStream=void 0;const r=e("readable-stream");class i extends r.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released)return void this.push(null);this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}n.ReadableWebToNodeStream=i}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream",file:"node_modules/readable-web-to-node-stream/lib/index.js"}],[3892,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,o;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(s(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(s(t,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/errors-browser.js"}],[3893,{"./_stream_readable":3895,"./_stream_writable":3897,_process:3660,inherits:3289},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=u;var i=e("./_stream_readable"),s=e("./_stream_writable");e("inherits")(u,i);for(var a=r(s.prototype),o=0;o<a.length;o++){var c=a[o];u.prototype[c]||(u.prototype[c]=s.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[3894,{"./_stream_transform":3896,inherits:3289},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[3895,{"../errors":3892,"./_stream_duplex":3893,"./internal/streams/async_iterator":3898,"./internal/streams/buffer_list":3899,"./internal/streams/destroy":3900,"./internal/streams/from":3902,"./internal/streams/state":3904,"./internal/streams/stream":3905,_process:3660,buffer:2666,events:2968,inherits:3289,"string_decoder/":4030,util:2631},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=T,T.ReadableState=E;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,o=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,h,p=e("./internal/streams/buffer_list"),f=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(T,s);var v=f.errorOrDestroy,S=["error","close","destroy","pause","resume"];function E(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function T(t){if(r=r||e("./_stream_duplex"),!(this instanceof T))return new T(t);var n=this instanceof r;this._readableState=new E(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function k(e,t,n,r,i){c("readableAddChunk",t);var s,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,u);else if(i||(s=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof o||"string"==typeof t||t===undefined||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(u,t)),s)v(e,s);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)u.endEmitted?v(e,new w):M(e,u,t,!0);else if(u.ended)v(e,new _);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?M(e,u,t,!1):C(e,u)):M(e,u,t,!1)}else r||(u.reading=!1,C(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function M(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),C(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=f.destroy,T.prototype._undestroy=f.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),k(this,e,t,!1,n)},T.prototype.unshift=function(e){return k(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function C(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function j(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(B,t,e))}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function q(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}T.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):x(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&U(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(r=e>0?D(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==r&&this.emit("data",r),r},T.prototype._read=function(e){v(this,new b("_read()"))},T.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,c("pipe count=%d opts=%j",s.pipesCount,t);var a=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:g;function o(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}s.endEmitted?n.nextTick(a):r.once("end",a),e.on("unpipe",o);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var d=!1;function h(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==q(s.pipes,e))&&!d&&(c("false write response, pause",s.awaitDrain),s.awaitDrain++),r.pause())}function p(t){c("onerror",t),g(),e.removeListener("error",p),0===i(e,"error")&&v(e,t)}function f(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",f),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",f),e.once("finish",m),e.emit("pipe",r),s.flowing||(c("pipe resume"),r.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=q(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},T.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?x(this):i.reading||n.nextTick(N,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(O,this),r},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(O,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&i!==undefined)&&((n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<S.length;s++)e.on(S[s],this.emit.bind(this,S[s]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=D,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(T,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[3896,{"../errors":3892,"./_stream_duplex":3893,inherits:3289},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[3897,{"../errors":3892,"./_stream_duplex":3893,"./internal/streams/destroy":3900,"./internal/streams/state":3904,"./internal/streams/stream":3905,_process:3660,buffer:2666,inherits:3289,"util-deprecate":4095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=T,T.WritableState=E;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),o=e("buffer").Buffer,c=("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,p=h.ERR_INVALID_ARG_TYPE,f=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,v=l.errorOrDestroy;function S(){}function E(t,s,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=s instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if("function"!=typeof s)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(R,e,t),e._writableState.errorEmitted=!0,v(e,i)):(s(i),e._writableState.errorEmitted=!0,v(e,i),R(e,t))}(e,r,i,t,s);else{var a=P(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),i?n.nextTick(M,e,r,a,s):M(e,r,a,s)}}(s,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function T(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!u.call(T,this))return new T(t);this._writableState=new E(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function k(e,t,n,r,i,s,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function M(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),R(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,s=new Array(i),a=t.corkedRequestsFree;a.entry=n;for(var o=0,c=!0;n;)s[o]=n,n.isBuf||(c=!1),n=n.next,o+=1;s.allBuffers=c,k(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&v(e,n),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var r=P(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}e("inherits")(T,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===T&&(e&&e._writableState instanceof E)}})):u=function(e){return e instanceof this},T.prototype.pipe=function(){v(this,new g)},T.prototype.write=function(e,t,r){var i,s=this._writableState,a=!1,u=!s.objectMode&&(i=e,o.isBuffer(i)||i instanceof c);return u&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=S),s.ending?function(e,t){var r=new b;v(e,r),n.nextTick(t,r)}(this,r):(u||function(e,t,r,i){var s;return null===r?s=new _:"string"==typeof r||t.objectMode||(s=new p("chunk",["string","Buffer"],r)),!s||(v(e,s),n.nextTick(i,s),!1)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,n,r,i,s){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var c=t.objectMode?1:r.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,r,i,s);return u}(this,s,u,e,t,r)),a},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,n){n(new f("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=l.destroy,T.prototype._undestroy=l.undestroy,T.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[3898,{"./end-of-stream":3901,_process:3660},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[a]=null,e[o]=null,t(p(n,!1)))}}function m(e){n.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(p(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[c]?r(e[c]):t(p(undefined,!0))}))}));var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(p(undefined,!0)):t[d](n,r)}),r)}}(i,this));else{var s=this[h].read();if(null!==s)return Promise.resolve(p(s,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(p(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[a]=null,n[o]=null,e(p(r,!1))):(n[a]=e,n[o]=t)},writable:!0}),t));return n[l]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[l]=null,n[a]=null,n[o]=null,t(e)),void(n[c]=e)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[o]=null,r(p(undefined,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[3899,{buffer:2666,util:2631},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=e("buffer").Buffer,u=e("util").inspect,l=u&&u.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,n,r,i=c.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=i,r=a,c.prototype.copy.call(t,n,r),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?r+=i:r+=i.slice(0,e),0==(e-=s)){s===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return u(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[39,{"../../../shared/modules/string-utils":4238},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("../../../shared/modules/string-utils");n.default=class{constructor(e={}){const{preferencesController:t,addressBookController:n,accountsController:r,networkController:i,trackMetaMetricsEvent:s}=e;this.preferencesController=t,this.accountsController=r,this.addressBookController=n,this.networkController=i,this._trackMetaMetricsEvent=s}async restoreUserData(e){const t=this.preferencesController.store.getState(),{preferences:n,addressBook:r,network:i,internalAccounts:s}=JSON.parse(e);n&&(n.identities=t.identities,n.lostIdentities=t.lostIdentities,n.selectedAddress=t.selectedAddress,this.preferencesController.store.updateState(n)),r&&this.addressBookController.update(r,!0),i&&this.networkController.loadBackup(i),s&&this.accountsController.loadBackup(s),(n||r||i||s)&&this._trackMetaMetricsEvent({event:"User Data Imported",category:"Backup"})}async backupUserData(){const e={preferences:{...this.preferencesController.store.getState()},internalAccounts:{internalAccounts:this.accountsController.state.internalAccounts},addressBook:{...this.addressBookController.state},network:{networkConfigurations:this.networkController.state.networkConfigurations}};delete e.preferences.identities,delete e.preferences.lostIdentities,delete e.preferences.selectedAddress;const t=JSON.stringify(e),n=new Date,i=e=>(0,r.prependZero)(e,2);return{fileName:`MetaMaskUserData.${n.getFullYear()}_${i(n.getMonth()+1)}_${i(n.getDay())}_${i(n.getHours())}_${i(n.getMinutes())}_${i(n.getDay())}.json`,data:t}}}}}},{package:"$root$",file:"app/scripts/lib/backup.js"}],[3900,{_process:3660},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,s){var a=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(s?s(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!s&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):s?(e.nextTick(r,a),s(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[3901,{"../../../errors":3892},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(s||i);var a=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){o=!1,u=!0,a||s.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||s.call(t)},p=function(e){s.call(t,e)},f=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new r),s.call(t,e)):o&&!u?(t._writableState&&t._writableState.ended||(e=new r),s.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",l),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[3902,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[3903,{"../../../errors":3892,"./end-of-stream":3901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;var i=e("../../../errors").codes,s=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var l,d=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new s("streams");var h=n.map((function(t,i){var s=i<n.length-1;return function(t,n,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return s(e);o=!0,s()}));var c=!1;return function(e){if(!o&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}(t,s,i>0,(function(e){l||(l=e),e&&h.forEach(c),s||(h.forEach(c),d(l))}))}));return n.reduce(u)}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[3904,{"../../../errors":3892},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(i?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/state.js"}],[3905,{events:2968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[3906,{"./lib/_stream_duplex.js":3893,"./lib/_stream_passthrough.js":3894,"./lib/_stream_readable.js":3895,"./lib/_stream_transform.js":3896,"./lib/_stream_writable.js":3897,"./lib/internal/streams/end-of-stream.js":3901,"./lib/internal/streams/pipeline.js":3903},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snaps-controllers>readable-web-to-node-stream>readable-stream",file:"node_modules/readable-web-to-node-stream/node_modules/readable-stream/readable-browser.js"}],[3914,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(n=t.exports=function(e){return String(e).replace(n.expr,"")}).expr=/\/+$/}}},{package:"remove-trailing-slash",file:"node_modules/remove-trailing-slash/index.js"}],[3922,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(r(e[n]));const n=p(...t);return p(a(n.length,192),n)}const t=y(e);return 1===t.length&&t[0]<128?t:p(a(t.length,128),t)}function i(e,t,n){if(n>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function s(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(l(e))}function a(e,t){if(e<56)return Uint8Array.from([e+t]);const n=m(e),r=m(t+55+n.length/2);return Uint8Array.from(h(r+n))}function o(e,t=!1){if(!e||0===e.length)return Uint8Array.from([]);const n=c(y(e));if(t)return n;if(0!==n.remainder.length)throw new Error("invalid RLP: remainder must be zero");return n.data}function c(e){let t,n,r,a,o;const u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(t=l-127,r=128===l?Uint8Array.from([]):i(e,1,t),2===t&&r[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:r,remainder:e.slice(t)}}if(l<=191){if(n=l-182,e.length-1<n)throw new Error("invalid RLP: not enough bytes for string length");if(t=s(i(e,1,n)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return r=i(e,n,t+n),{data:r,remainder:e.slice(t+n)}}if(l<=247){for(t=l-191,a=i(e,1,t);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(t)}}{if(n=l-246,t=s(i(e,1,n)),t<56)throw new Error("invalid RLP: encoded list too short");const r=n+t;if(r>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=i(e,n,r);a.length;)o=c(a),u.push(o.data),a=o.remainder;return{data:u,remainder:e.slice(r)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.utils=n.decode=n.encode=void 0,n.encode=r,n.decode=o;const u=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){let t="";for(let n=0;n<e.length;n++)t+=u[e[n]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function h(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n;t[n]=d(e.slice(r,r+2))}return t}function p(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}function f(e){return(new TextEncoder).encode(e)}function m(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function y(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?h((t="string"!=typeof(n=e)?n:g(n)?n.slice(2):n).length%2?`0${t}`:t):f(e);var t,n;if("number"==typeof e||"bigint"==typeof e)return e?h(m(e)):Uint8Array.from([]);if(null===e||e===undefined)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}n.utils={bytesToHex:l,concatBytes:p,hexToBytes:h,utf8ToBytes:f};const _={encode:r,decode:o};n.default=_}}},{package:"eth-lattice-keyring>rlp",file:"node_modules/rlp/dist/index.js"}],[3931,{timers:4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){!function(r){const i=2147483647;function s(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let n=1779033703,r=3144134277,i=1013904242,s=2773480762,a=1359893119,o=2600822924,c=528734635,u=1541459225;const l=new Uint32Array(64);function d(e){let d=0,h=e.length;for(;h>=64;){let p,f,m,g,y,_=n,b=r,w=i,v=s,S=a,E=o,T=c,k=u;for(f=0;f<16;f++)m=d+4*f,l[f]=(255&e[m])<<24|(255&e[m+1])<<16|(255&e[m+2])<<8|255&e[m+3];for(f=16;f<64;f++)p=l[f-2],g=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=l[f-15],y=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,l[f]=(g+l[f-7]|0)+(y+l[f-16]|0)|0;for(f=0;f<64;f++)g=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&E^~S&T)|0)+(k+(t[f]+l[f]|0)|0)|0,y=((_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10))+(_&b^_&w^b&w)|0,k=T,T=E,E=S,S=v+g|0,v=w,w=b,b=_,_=g+y|0;n=n+_|0,r=r+b|0,i=i+w|0,s=s+v|0,a=a+S|0,o=o+E|0,c=c+T|0,u=u+k|0,d+=64,h-=64}}d(e);let h,p=e.length%64,f=e.length/536870912|0,m=e.length<<3,g=p<56?56:120,y=e.slice(e.length-p,e.length);for(y.push(128),h=p+1;h<g;h++)y.push(0);return y.push(f>>>24&255),y.push(f>>>16&255),y.push(f>>>8&255),y.push(f>>>0&255),y.push(m>>>24&255),y.push(m>>>16&255),y.push(m>>>8&255),y.push(m>>>0&255),d(y),[n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function a(e,t,n){e=e.length<=64?e:s(e);const r=64+t.length+4,i=new Array(r),a=new Array(64);let o,c=[];for(o=0;o<64;o++)i[o]=54;for(o=0;o<e.length;o++)i[o]^=e[o];for(o=0;o<t.length;o++)i[64+o]=t[o];for(o=r-4;o<r;o++)i[o]=0;for(o=0;o<64;o++)a[o]=92;for(o=0;o<e.length;o++)a[o]^=e[o];function u(){for(let e=r-1;e>=r-4;e--){if(i[e]++,i[e]<=255)return;i[e]=0}}for(;n>=32;)u(),c=c.concat(s(a.concat(s(i)))),n-=32;return n>0&&(u(),c=c.concat(s(a.concat(s(i))).slice(0,n))),c}function o(e,t,n,r,i){let s;for(d(e,16*(2*n-1),i,0,16),s=0;s<2*n;s++)l(e,16*s,i,16),u(i,r),d(i,0,e,t+16*s,16);for(s=0;s<n;s++)d(e,t+2*s*16,e,16*s,16);for(s=0;s<n;s++)d(e,t+16*(2*s+1),e,16*(s+n),16)}function c(e,t){return e<<t|e>>>32-t}function u(e,t){d(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=c(t[0]+t[12],7),t[8]^=c(t[4]+t[0],9),t[12]^=c(t[8]+t[4],13),t[0]^=c(t[12]+t[8],18),t[9]^=c(t[5]+t[1],7),t[13]^=c(t[9]+t[5],9),t[1]^=c(t[13]+t[9],13),t[5]^=c(t[1]+t[13],18),t[14]^=c(t[10]+t[6],7),t[2]^=c(t[14]+t[10],9),t[6]^=c(t[2]+t[14],13),t[10]^=c(t[6]+t[2],18),t[3]^=c(t[15]+t[11],7),t[7]^=c(t[3]+t[15],9),t[11]^=c(t[7]+t[3],13),t[15]^=c(t[11]+t[7],18),t[1]^=c(t[0]+t[3],7),t[2]^=c(t[1]+t[0],9),t[3]^=c(t[2]+t[1],13),t[0]^=c(t[3]+t[2],18),t[6]^=c(t[5]+t[4],7),t[7]^=c(t[6]+t[5],9),t[4]^=c(t[7]+t[6],13),t[5]^=c(t[4]+t[7],18),t[11]^=c(t[10]+t[9],7),t[8]^=c(t[11]+t[10],9),t[9]^=c(t[8]+t[11],13),t[10]^=c(t[9]+t[8],18),t[12]^=c(t[15]+t[14],7),t[13]^=c(t[12]+t[15],9),t[14]^=c(t[13]+t[12],13),t[15]^=c(t[14]+t[13],18);for(let n=0;n<16;++n)e[n]+=t[n]}function l(e,t,n,r){for(let i=0;i<r;i++)n[i]^=e[t+i]}function d(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}function h(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const n=e[t];if("number"!=typeof n||n%1||n<0||n>=256)return!1}return!0}function p(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function f(t,n,r,s,c,u,f){if(r=p(r,"N"),s=p(s,"r"),c=p(c,"p"),u=p(u,"dkLen"),0===r||r&r-1)throw new Error("N must be power of 2");if(r>i/128/s)throw new Error("N too large");if(s>i/128/c)throw new Error("r too large");if(!h(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!h(n))throw new Error("salt must be an array or buffer");n=Array.prototype.slice.call(n);let m=a(t,n,128*c*s);const g=new Uint32Array(32*c*s);for(let e=0;e<g.length;e++){const t=4*e;g[e]=(255&m[t+3])<<24|(255&m[t+2])<<16|(255&m[t+1])<<8|255&m[t+0]}const y=new Uint32Array(64*s),_=new Uint32Array(32*s*r),b=32*s,w=new Uint32Array(16),v=new Uint32Array(16),S=c*r*2;let E,T,k=0,M=null,A=!1,P=0,x=0;const R=f?parseInt(1e3/s):4294967295,C=void 0!==e?e:setTimeout,I=function(){if(A)return f(new Error("cancelled"),k/S);let e;switch(P){case 0:T=32*x*s,d(g,T,y,0,b),P=1,E=0;case 1:e=r-E,e>R&&(e=R);for(let t=0;t<e;t++)d(y,0,_,(E+t)*b,b),o(y,b,s,w,v);if(E+=e,k+=e,f){const e=parseInt(1e3*k/S);if(e!==M){if(A=f(null,k/S),A)break;M=e}}if(E<r)break;E=0,P=2;case 2:e=r-E,e>R&&(e=R);for(let t=0;t<e;t++){const e=y[16*(2*s-1)]&r-1;l(_,e*b,y,b),o(y,b,s,w,v)}if(E+=e,k+=e,f){const e=parseInt(1e3*k/S);if(e!==M){if(A=f(null,k/S),A)break;M=e}}if(E<r)break;if(d(y,0,g,T,b),x++,x<c){P=0;break}m=[];for(let e=0;e<g.length;e++)m.push(255&g[e]),m.push(g[e]>>8&255),m.push(g[e]>>16&255),m.push(g[e]>>24&255);const n=a(t,m,u);return f&&f(null,1,n),n}f&&C(I)};if(!f)for(;;){const e=I();if(e!=undefined)return e}I()}const m={scrypt:function(e,t,n,r,i,s,a){return new Promise((function(o,c){let u=0;a&&a(0),f(e,t,n,r,i,s,(function(e,t,n){if(e)c(e);else if(n)a&&1!==u&&a(1),o(new Uint8Array(n));else if(a&&t!==u)return u=t,a(t)}))}))},syncScrypt:function(e,t,n,r,i,s){return new Uint8Array(f(e,t,n,r,i,s))}};void 0!==n?t.exports=m:"function"==typeof define&&define.amd?define(m):r&&(r.scrypt&&(r._scrypt=r.scrypt),r.scrypt=m)}(this)}).call(this)}).call(this,e("timers").setImmediate)}}},{package:"ethereumjs-util>ethereum-cryptography>scrypt-js",file:"node_modules/scrypt-js/scrypt.js"}],[40,{loglevel:3515},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=[];return function(t,n,r,s){return e.indexOf(t.id)>=0?(i.default.info(`RPC request with id ${t.id} already seen.`),s()):(e.push(t.id),r())}};var r,i=(r=e("loglevel"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"app/scripts/lib/createDupeReqFilterMiddleware.js"}],[4029,{events:2968,"fast-fifo":2998,"queue-tick":3711},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{EventEmitter:r}=e("events"),i=new Error("Stream was destroyed"),s=new Error("Premature close"),a=e("queue-tick"),o=e("fast-fifo"),c=134217727,u=1^c,l=2^c,d=64,h=128,p=256,f=1024,m=2048,g=4096,y=8192,_=16384,b=32768,w=16^c,v=768^c,S=134184959,E=32^c,T=2<<17,k=4<<17,M=8<<17,A=16<<17,P=32<<17,x=64<<17,R=128<<17,C=256<<17,I=512<<17,O=100532223,N=133693439,j=117440511,L=131088,D=134086639,U=4210688,B=14,q=15,F=4210702,$=16809984,H=16809999,K=1179648,W=1179663,G=Symbol.asyncIterator||Symbol("asyncIterator");class z{constructor(e,{highWaterMark:t=16384,map:n=null,mapWritable:r,byteLength:i,byteLengthWritable:s}={}){this.stream=e,this.queue=new o,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||fe,this.map=r||n,this.afterWrite=ee.bind(this),this.afterUpdateNextTick=re.bind(this)}get ended(){return!!(this.stream._duplexState&P)}push(e){return null!==this.map&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=M,!0):(this.stream._duplexState|=3145728,!1)}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),0===this.buffered&&(this.stream._duplexState&=133169151),e}end(e){"function"==typeof e?this.stream.once("finish",e):e!==undefined&&null!==e&&this.push(e),this.stream._duplexState=(this.stream._duplexState|I)&N}autoBatch(e,t){const n=[],r=this.stream;for(n.push(e);(r._duplexState&W)===K;)n.push(r._writableState.shift());if(r._duplexState&q)return t(null);r._writev(n,t)}update(){const e=this.stream;e._duplexState|=T;do{for(;(e._duplexState&W)===M;){const t=this.shift();e._duplexState|=33685504,e._write(t,this.afterWrite)}655360&e._duplexState||this.updateNonPrimary()}while(!0===this.continueUpdate());e._duplexState&=133955583}updateNonPrimary(){const e=this.stream;if((72482831&e._duplexState)===I)return e._duplexState=67108863&e._duplexState|131072,void e._final(X.bind(this));4!=(e._duplexState&B)?1==(e._duplexState&H)&&(e._duplexState=(e._duplexState|L)&u,e._open(ie.bind(this))):e._duplexState&$||(e._duplexState|=L,e._destroy(Z.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&R)&&(this.stream._duplexState&=j,!0)}updateCallback(){(17563663&this.stream._duplexState)===k?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&R||(this.stream._duplexState|=R,this.stream._duplexState&T||a(this.afterUpdateNextTick))}}class Y{constructor(e,{highWaterMark:t=16384,map:n=null,mapReadable:r,byteLength:i,byteLengthReadable:s}={}){this.stream=e,this.queue=new o,this.highWaterMark=t,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=s||i||fe,this.map=r||n,this.pipeTo=null,this.afterRead=te.bind(this),this.afterUpdateNextTick=ne.bind(this)}get ended(){return!!(this.stream._duplexState&_)}pipe(e,t){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if("function"!=typeof t&&(t=null),this.stream._duplexState|=512,this.pipeTo=e,this.pipeline=new J(this.stream,e,t),t&&this.stream.on("error",me),pe(e))e._writableState.pipeline=this.pipeline,t&&e.on("error",me),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{const t=this.pipeline.done.bind(this.pipeline,e),n=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",t),e.on("close",n),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",Q.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){const t=this.stream;return null===e?(this.highWaterMark=0,t._duplexState=134152127&t._duplexState|1024,!1):(null!==this.map&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),t._duplexState=134152191&t._duplexState|128,this.buffered<this.highWaterMark)}shift(){const e=this.queue.shift();return this.buffered-=this.byteLength(e),0===this.buffered&&(this.stream._duplexState&=134209407),e}unshift(e){const t=[null!==this.map?this.map(e):e];for(;this.buffered>0;)t.push(this.shift());for(let e=0;e<t.length-1;e++){const n=t[e];this.buffered+=this.byteLength(n),this.queue.push(n)}this.push(t[t.length-1])}read(){const e=this.stream;if((16527&e._duplexState)===h){const t=this.shift();return null!==this.pipeTo&&!1===this.pipeTo.write(t)&&(e._duplexState&=v),e._duplexState&m&&e.emit("data",t),t}return null}drain(){const e=this.stream;for(;(16527&e._duplexState)===h&&768&e._duplexState;){const t=this.shift();null!==this.pipeTo&&!1===this.pipeTo.write(t)&&(e._duplexState&=v),e._duplexState&m&&e.emit("data",t)}}update(){const e=this.stream;e._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&!(82975&e._duplexState);)e._duplexState|=65552,e._read(this.afterRead),this.drain();4224==(12431&e._duplexState)&&(e._duplexState|=y,e.emit("readable")),80&e._duplexState||this.updateNonPrimary()}while(!0===this.continueUpdate());e._duplexState&=E}updateNonPrimary(){const e=this.stream;(1167&e._duplexState)===f&&(e._duplexState=134216703&e._duplexState|16384,e.emit("end"),(e._duplexState&F)===U&&(e._duplexState|=4),null!==this.pipeTo&&this.pipeTo.end()),4!=(e._duplexState&B)?1==(e._duplexState&H)&&(e._duplexState=(e._duplexState|L)&u,e._open(ie.bind(this))):e._duplexState&$||(e._duplexState|=L,e._destroy(Z.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&b)&&(this.stream._duplexState&=S,!0)}updateCallback(){(32879&this.stream._duplexState)===d?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&b||(this.stream._duplexState|=b,32&this.stream._duplexState||a(this.afterUpdateNextTick))}}class V{constructor(e){this.data=null,this.afterTransform=se.bind(e),this.afterFinal=null}}class J{constructor(e,t,n){this.from=e,this.to=t,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,t){t&&(this.error=t),e!==this.to||(this.to=null,null===this.from)?e!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):e._duplexState&_||this.to.destroy(this.error||new Error("Readable stream closed before ending")):this.from._duplexState&_&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function Q(){this.stream._duplexState|=512,this.updateCallback()}function X(e){const t=this.stream;e&&t.destroy(e),t._duplexState&B||(t._duplexState|=P,t.emit("finish")),(t._duplexState&F)===U&&(t._duplexState|=4),t._duplexState&=O,t._duplexState&T?this.updateNextTick():this.update()}function Z(e){const t=this.stream;e||this.error===i||(e=this.error),e&&t.emit("error",e),t._duplexState|=8,t.emit("close");const n=t._readableState,r=t._writableState;if(null!==n&&null!==n.pipeline&&n.pipeline.done(t,e),null!==r){for(;null!==r.drains&&r.drains.length>0;)r.drains.shift().resolve(!1);null!==r.pipeline&&r.pipeline.done(t,e)}}function ee(e){const t=this.stream;e&&t.destroy(e),t._duplexState&=O,null!==this.drains&&function(e){for(let t=0;t<e.length;t++)0==--e[t].writes&&(e.shift().resolve(!0),t--)}(this.drains),(3276815&t._duplexState)===A&&(t._duplexState&=132120575,(t._duplexState&x)===x&&t.emit("drain")),this.updateCallback()}function te(e){e&&this.stream.destroy(e),this.stream._duplexState&=w,this.updateCallback()}function ne(){32&this.stream._duplexState||(this.stream._duplexState&=S,this.update())}function re(){this.stream._duplexState&T||(this.stream._duplexState&=j,this.update())}function ie(e){const t=this.stream;e&&t.destroy(e),4&t._duplexState||(17423&t._duplexState||(t._duplexState|=d),71303183&t._duplexState||(t._duplexState|=k),t.emit("open")),t._duplexState&=D,null!==t._writableState&&t._writableState.updateCallback(),null!==t._readableState&&t._readableState.updateCallback()}function se(e,t){t!==undefined&&null!==t&&this.push(t),this._writableState.afterWrite(e)}class ae extends r{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",ge.bind(this)))}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return null!==this._readableState||undefined}get writable(){return null!==this._writableState||undefined}get destroyed(){return!!(8&this._duplexState)}get destroying(){return!!(this._duplexState&B)}destroy(e){this._duplexState&B||(e||(e=i),this._duplexState=133693375&this._duplexState|4,null!==this._readableState&&(this._readableState.highWaterMark=0,this._readableState.error=e),null!==this._writableState&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=2,this._predestroy(),this._duplexState&=l,null!==this._readableState&&this._readableState.updateNextTick(),null!==this._writableState&&this._writableState.updateNextTick())}on(e,t){return null!==this._readableState&&("data"===e&&(this._duplexState|=2304,this._readableState.updateNextTick()),"readable"===e&&(this._duplexState|=g,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===e&&(this._duplexState|=x,this._writableState.updateNextTick()),super.on(e,t)}}class oe extends ae{constructor(e){super(e),this._duplexState|=4194305,this._readableState=new Y(this,e),e&&(e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick())}_read(e){e(null)}pipe(e,t){return this._readableState.updateNextTick(),this._readableState.pipe(e,t),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTick(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTick(),this._readableState.unshift(e)}resume(){return this._duplexState|=p,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=134217471,this}static _fromAsyncIterator(e,t){let n;const r=new oe({...t,read(t){e.next().then(i).then(t.bind(null,null)).catch(t)},predestroy(){n=e.return()},destroy(e){if(!n)return e(null);n.then(e.bind(null,null)).catch(e)}});return r;function i(e){e.done?r.push(null):r.push(e.value)}}static from(e,t){if(pe(n=e)&&n.readable)return e;var n;if(e[G])return this._fromAsyncIterator(e[G](),t);Array.isArray(e)||(e=e===undefined?[]:[e]);let r=0;return new oe({...t,read(t){this.push(r===e.length?null:e[r++]),t(null)}})}static isBackpressured(e){return!!(17422&e._duplexState)||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return!(e._duplexState&p)}[G](){const e=this;let t=null,n=null,r=null;return this.on("error",(e=>{t=e})),this.on("readable",(function(){null!==n&&s(e.read())})),this.on("close",(function(){null!==n&&s(null)})),{[G](){return this},next:()=>new Promise((function(t,i){n=t,r=i;const a=e.read();null!==a?s(a):8&e._duplexState&&s(null)})),return:()=>a(null),throw:e=>a(e)};function s(s){null!==r&&(t?r(t):null!==s||e._duplexState&_?n({value:s,done:null===s}):r(i),r=n=null)}function a(t){return e.destroy(t),new Promise(((n,r)=>{if(8&e._duplexState)return n({value:undefined,done:!0});e.once("close",(function(){t?r(t):n({value:undefined,done:!0})}))}))}}}class ce extends oe{constructor(e){super(e),this._duplexState=1,this._writableState=new z(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}}class ue extends ce{constructor(e){super(e),this._transformState=new V(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,t){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(null!==this._transformState.data){const t=this._transformState.data;this._transformState.data=null,e(null),this._transform(t,this._transformState.afterTransform)}else e(null)}_transform(e,t){t(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(le.bind(this))}}function le(e,t){const n=this._transformState.afterFinal;if(e)return n(e);null!==t&&t!==undefined&&this.push(t),this.push(null),n(null)}function de(e,...t){const n=Array.isArray(e)?[...e,...t]:[e,...t],r=n.length&&"function"==typeof n[n.length-1]?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let i=n[0],a=null,o=null;for(let e=1;e<n.length;e++)a=n[e],pe(i)?i.pipe(a,u):(c(i,!0,e>1,u),i.pipe(a)),i=a;if(r){let e=!1;const t=pe(a)||!(!a._writableState||!a._writableState.autoDestroy);a.on("error",(e=>{null===o&&(o=e)})),a.on("finish",(()=>{e=!0,t||r(o)})),t&&a.on("close",(()=>r(o||(e?null:s))))}return a;function c(e,t,n,r){e.on("error",r),e.on("close",(function(){if(t&&e._readableState&&!e._readableState.ended)return r(s);if(n&&e._writableState&&!e._writableState.ended)return r(s)}))}function u(e){if(e&&!o){o=e;for(const t of n)t.destroy(e)}}}function he(e){return!!e._readableState||!!e._writableState}function pe(e){return"number"==typeof e._duplexState&&he(e)}function fe(e){return function(e){return"object"==typeof e&&null!==e&&"number"==typeof e.byteLength}(e)?e.byteLength:1024}function me(){}function ge(){this.destroy(new Error("Stream aborted."))}t.exports={pipeline:de,pipelinePromise:function(...e){return new Promise(((t,n)=>de(...e,(e=>{if(e)return n(e);t()}))))},isStream:he,isStreamx:pe,getStreamError:function(e){const t=e._readableState&&e._readableState.error||e._writableState&&e._writableState.error;return t===i?null:t},Stream:ae,Writable:class extends ae{constructor(e){super(e),this._duplexState|=16385,this._writableState=new z(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}_writev(e,t){t(null)}_write(e,t){this._writableState.autoBatch(e,t)}_final(e){e(null)}static isBackpressured(e){return!!(73400334&e._duplexState)}static drained(e){if(e.destroyed)return Promise.resolve(!1);const t=e._writableState,n=t.queue.length+(e._duplexState&C?1:0);return 0===n?Promise.resolve(!0):(null===t.drains&&(t.drains=[]),new Promise((e=>{t.drains.push({writes:n,resolve:e})})))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Readable:oe,Duplex:ce,Transform:ue,PassThrough:class extends ue{}}}}},{package:"@metamask/snaps-controllers>tar-stream>streamx",file:"node_modules/streamx/index.js"}],[4035,{fs:2631},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{t.exports=e("fs").constants||r}catch{t.exports=r}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/constants.js"}],[4036,{"./headers":4037,b4a:2561,"fast-fifo":2998,streamx:4029},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Writable:r,Readable:i,getStreamError:s}=e("streamx"),a=e("fast-fifo"),o=e("b4a"),c=e("./headers"),u=o.alloc(0);class l{constructor(){this.buffered=0,this.shifted=0,this.queue=new a,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return 0===this._buffered?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(0===e)return u;let t=this._next(e);if(e===t.byteLength)return t;const n=[t];for(;(e-=t.byteLength)>0;)t=this._next(e),n.push(t);return o.concat(n)}_next(e){const t=this.queue.peek(),n=t.byteLength-this._offset;if(e>=n){const e=this._offset?t.subarray(this._offset,t.byteLength):t;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,e}return this.buffered-=e,this.shifted+=e,t.subarray(this._offset,this._offset+=e)}}class d extends i{constructor(e,t,n){super(),this.header=t,this.offset=n,this._parent=e}_read(e){0===this.header.size&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(s(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=f(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}}class h extends r{constructor(e){super(e),e||(e={}),this._buffer=new l,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=p,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e)return this.destroy(e),void this._continueWrite(e);this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=c.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),0===this._header.size||"directory"===this._header.type?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=c.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=c.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=c.decodePax(e);break;case"pax-header":this._pax=null===this._paxGlobal?c.decodePax(e):Object.assign({},this._paxGlobal,c.decodePax(e))}}_consumeLongHeader(){this._longHeader=!1,this._missing=f(this._header.size);const e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(e){return this._continueWrite(e),!1}return!0}_consumeStream(){const e=this._buffer.shiftFirst(this._missing);if(null===e)return!1;this._missing-=e.byteLength;const t=this._stream.push(e);return 0===this._missing?(this._stream.push(null),t&&this._stream._detach(),t&&!1===this._locked):t}_createStream(){return new d(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;)if(this._missing>0){if(null!==this._stream){if(!1===this._consumeStream())return;continue}if(!0===this._longHeader){if(this._missing>this._buffer.buffered)break;if(!1===this._consumeLongHeader())return!1;continue}const e=this._buffer.shiftFirst(this._missing);null!==e&&(this._missing-=e.byteLength)}else{if(this._buffer.buffered<512)break;if(null!==this._stream||!1===this._consumeHeader())return}this._continueWrite(null)}_continueWrite(e){const t=this._callback;this._callback=p,t(e)}_write(e,t){this._callback=t,this._buffer.push(e),this._update()}_final(e){this._finished=0===this._missing&&0===this._buffer.buffered,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(s(this)),e(null)}[Symbol.asyncIterator](){let e=null,t=null,n=null,r=null,i=null;const s=this;return this.on("entry",(function(e,s,a){i=a,s.on("error",p),t?(t({value:s,done:!1}),t=n=null):r=s})),this.on("error",(t=>{e=t})),this.on("close",(function(){if(a(e),!t)return;e?n(e):t({value:undefined,done:!0});t=n=null})),{[Symbol.asyncIterator](){return this},next:()=>new Promise(o),return:()=>c(null),throw:e=>c(e)};function a(e){if(!i)return;const t=i;i=null,t(e)}function o(i,o){return e?o(e):r?(i({value:r,done:!1}),void(r=null)):(t=i,n=o,a(null),void(s._finished&&t&&(t({value:undefined,done:!0}),t=n=null)))}function c(e){return s.destroy(e),a(e),new Promise(((t,n)=>{if(s.destroyed)return t({value:undefined,done:!0});s.once("close",(function(){e?n(e):t({value:undefined,done:!0})}))}))}}}function p(){}function f(e){return(e&=511)&&512-e}t.exports=function(e){return new h(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/extract.js"}],[4037,{b4a:2561},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("b4a"),i="0000000000000000000",s="7777777777777777777",a="0".charCodeAt(0),o=r.from([117,115,116,97,114,0]),c=r.from([a,a]),u=r.from([117,115,116,97,114,32]),l=r.from([32,0]),d=257,h=263;function p(e,t,n,r){for(;n<r;n++)if(e[n]===t)return n;return r}function f(e){let t=256;for(let n=0;n<148;n++)t+=e[n];for(let n=156;n<512;n++)t+=e[n];return t}function m(e,t){return(e=e.toString(8)).length>t?s.slice(0,t)+" ":i.slice(0,t-e.length)+e+" "}function g(e,t,n){if(128&(e=e.subarray(t,t+n))[t=0])return function(e){let t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}const n=[];let r;for(r=e.length-1;r>0;r--){const i=e[r];t?n.push(i):n.push(255-i)}let i=0;const s=n.length;for(r=0;r<s;r++)i+=n[r]*Math.pow(256,r);return t?i:-1*i}(e);{for(;t<e.length&&32===e[t];)t++;const n=(i=p(e,32,t,e.length),s=e.length,a=e.length,"number"!=typeof i?a:(i=~~i)>=s?s:i>=0||(i+=s)>=0?i:0);for(;t<n&&0===e[t];)t++;return n===t?0:parseInt(r.toString(e.subarray(t,n)),8)}var i,s,a}function y(e,t,n,i){return r.toString(e.subarray(t,p(e,0,t,t+n)),i)}function _(e){const t=r.byteLength(e);let n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,t+n+e}n.decodeLongPath=function(e,t){return y(e,0,e.length,t)},n.encodePax=function(e){let t="";e.name&&(t+=_(" path="+e.name+"\n")),e.linkname&&(t+=_(" linkpath="+e.linkname+"\n"));const n=e.pax;if(n)for(const e in n)t+=_(" "+e+"="+n[e]+"\n");return r.from(t)},n.decodePax=function(e){const t={};for(;e.length;){let n=0;for(;n<e.length&&32!==e[n];)n++;const i=parseInt(r.toString(e.subarray(0,n)),10);if(!i)return t;const s=r.toString(e.subarray(n+1,i-1)),a=s.indexOf("=");if(-1===a)return t;t[s.slice(0,a)]=s.slice(a+1),e=e.subarray(i)}return t},n.encode=function(e){const t=r.alloc(512);let n=e.name,i="";if(5===e.typeflag&&"/"!==n[n.length-1]&&(n+="/"),r.byteLength(n)!==n.length)return null;for(;r.byteLength(n)>100;){const e=n.indexOf("/");if(-1===e)return null;i+=i?"/"+n.slice(0,e):n.slice(0,e),n=n.slice(e+1)}return r.byteLength(n)>100||r.byteLength(i)>155||e.linkname&&r.byteLength(e.linkname)>100?null:(r.write(t,n),r.write(t,m(4095&e.mode,6),100),r.write(t,m(e.uid,6),108),r.write(t,m(e.gid,6),116),function(e,t,n){e.toString(8).length>11?function(e,t,n){t[n]=128;for(let r=11;r>0;r--)t[n+r]=255&e,e=Math.floor(e/256)}(e,t,n):r.write(t,m(e,11),n)}(e.size,t,124),r.write(t,m(e.mtime.getTime()/1e3|0,11),136),t[156]=a+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&r.write(t,e.linkname,157),r.copy(o,t,d),r.copy(c,t,263),e.uname&&r.write(t,e.uname,265),e.gname&&r.write(t,e.gname,297),r.write(t,m(e.devmajor||0,6),329),r.write(t,m(e.devminor||0,6),337),i&&r.write(t,i,345),r.write(t,m(f(t),6),148),t)},n.decode=function(e,t,n){let i=0===e[156]?0:e[156]-a,s=y(e,0,100,t);const c=g(e,100,8),p=g(e,108,8),m=g(e,116,8),_=g(e,124,12),b=g(e,136,12),w=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(i),v=0===e[157]?null:y(e,157,100,t),S=y(e,265,32),E=y(e,297,32),T=g(e,329,8),k=g(e,337,8),M=f(e);if(256===M)return null;if(M!==g(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(function(e){return r.equals(o,e.subarray(d,263))}(e))e[345]&&(s=y(e,345,155,t)+"/"+s);else if(function(e){return r.equals(u,e.subarray(d,263))&&r.equals(l,e.subarray(h,265))}(e));else if(!n)throw new Error("Invalid tar header: unknown format.");return 0===i&&s&&"/"===s[s.length-1]&&(i=5),{name:s,mode:c,uid:p,gid:m,size:_,mtime:new Date(1e3*b),type:w,linkname:v,uname:S,gname:E,devmajor:T,devminor:k,pax:null}}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/headers.js"}],[4038,{"./extract":4036,"./pack":4039},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){n.extract=e("./extract"),n.pack=e("./pack")}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/index.js"}],[4039,{"./constants":4035,"./headers":4037,b4a:2561,streamx:4029},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{Readable:r,Writable:i,getStreamError:s}=e("streamx"),a=e("b4a"),o=e("./constants"),c=e("./headers"),u=a.alloc(1024);class l extends i{constructor(e,t,n){super({mapWritable:f,eagerOpen:!0}),this.written=0,this.header=t,this._callback=n,this._linkname=null,this._isLinkname="symlink"===t.type&&!t.linkname,this._isVoid="file"!==t.type&&"contiguous-file"!==t.type,this._finished=!1,this._pack=e,this._openCallback=null,null===this._pack._stream?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(null===this._callback)return;const t=this._callback;this._callback=null,t(e)}_continueOpen(){null===this._pack._stream&&(this._pack._stream=this);const e=this._openCallback;if(this._openCallback=null,null!==e){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,t){return this._isLinkname?(this._linkname=this._linkname?a.concat([this._linkname,e]):e,t(null)):this._isVoid?e.byteLength>0?t(new Error("No body allowed for this entry")):t():(this.written+=e.byteLength,this._pack.push(e)?t():void(this._pack._drain=t))}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?a.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),p(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return s(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}}class d extends r{constructor(e){super(e),this._drain=h,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,t,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");"function"==typeof t&&(n=t,t=null),n||(n=h),e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&o.S_IFMT){case o.S_IFBLK:return"block-device";case o.S_IFCHR:return"character-device";case o.S_IFDIR:return"directory";case o.S_IFIFO:return"fifo";case o.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?493:420),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=a.from(t));const r=new l(this,e,n);return a.isBuffer(t)?(e.size=t.byteLength,r.write(t),r.end(),r):(r._isVoid,r)}finalize(){this._stream||this._pending.length>0?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(u),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){const t=c.encode(e);if(t)return void this.push(t)}this._encodePax(e)}_encodePax(e){const t=c.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(c.encode(n)),this.push(t),p(this,t.byteLength),n.size=e.size,n.type=e.type,this.push(c.encode(n))}_doDrain(){const e=this._drain;this._drain=h,e()}_predestroy(){const e=s(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){const t=this._pending.shift();t.destroy(e),t._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}}function h(){}function p(e,t){(t&=511)&&e.push(u.subarray(0,512-t))}function f(e){return a.isBuffer(e)?e:a.from(e)}t.exports=function(e){return new d(e)}}}},{package:"@metamask/snaps-controllers>tar-stream",file:"node_modules/tar-stream/pack.js"}],[4040,{_process:3660,stream:3995},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("stream");function i(e,t,i){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,a=!1,o=[],c=!1,u=new r;function l(){for(;o.length&&!u.paused;){var e=o.shift();if(null===e)return u.emit("end");u.emit("data",e)}}return u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(i&&!1===i.autoDestroy),u.write=function(t){return e.call(this,t),!u.paused},u.queue=u.push=function(e){return c||(null===e&&(c=!0),o.push(e),l()),u},u.on("end",(function(){u.readable=!1,!u.writable&&u.autoDestroy&&n.nextTick((function(){u.destroy()}))})),u.end=function(e){if(!s)return s=!0,arguments.length&&u.write(e),u.writable=!1,t.call(u),!u.readable&&u.autoDestroy&&u.destroy(),u},u.destroy=function(){if(!a)return a=!0,s=!0,o.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),l(),u.paused||u.emit("drain"),u},u}t.exports=i,i.through=i}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through",file:"node_modules/through/index.js"}],[4044,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view",file:"node_modules/to-data-view/index.js"}],[4047,{"./mixin-tracking":4049,"./util":4053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decorate=n.getDecoratorsForClass=n.directDecoratorSearch=n.deepDecoratorSearch=void 0;const r=e("./util"),i=e("./mixin-tracking"),s=(e,t)=>{var n,i;const s=(0,r.unique)([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),a={};for(let o of s)a[o]=(0,r.unique)([...null!==(n=null==e?void 0:e[o])&&void 0!==n?n:[],...null!==(i=null==t?void 0:t[o])&&void 0!==i?i:[]]);return a},a=(e,t)=>{var n,r,i,a;return{property:s(null!==(n=null==e?void 0:e.property)&&void 0!==n?n:{},null!==(r=null==t?void 0:t.property)&&void 0!==r?r:{}),method:s(null!==(i=null==e?void 0:e.method)&&void 0!==i?i:{},null!==(a=null==t?void 0:t.method)&&void 0!==a?a:{})}},o=(e,t)=>{var n,i,s,o,c,u;return{class:(0,r.unique)([...null!==(n=null==e?void 0:e.class)&&void 0!==n?n:[],...null!==(i=null==t?void 0:t.class)&&void 0!==i?i:[]]),static:a(null!==(s=null==e?void 0:e.static)&&void 0!==s?s:{},null!==(o=null==t?void 0:t.static)&&void 0!==o?o:{}),instance:a(null!==(c=null==e?void 0:e.instance)&&void 0!==c?c:{},null!==(u=null==t?void 0:t.instance)&&void 0!==u?u:{})}},c=new Map;n.deepDecoratorSearch=(...e)=>{const t=((...e)=>{var t;const n=new Set,s=new Set([...e]);for(;s.size>0;)for(let e of s){const a=[...(0,r.protoChain)(e.prototype).map((e=>e.constructor)),...null!==(t=(0,i.getMixinsForClass)(e))&&void 0!==t?t:[]].filter((e=>!n.has(e)));for(let e of a)s.add(e);n.add(e),s.delete(e)}return[...n]})(...e).map((e=>c.get(e))).filter((e=>!!e));return 0==t.length?{}:1==t.length?t[0]:t.reduce(((e,t)=>o(e,t)))};n.directDecoratorSearch=(...e)=>{const t=e.map((e=>(0,n.getDecoratorsForClass)(e)));return 0===t.length?{}:1===t.length?t[0]:t.reduce(((e,t)=>o(e,t)))};n.getDecoratorsForClass=e=>{let t=c.get(e);return t||(t={},c.set(e,t)),t};n.decorate=e=>(...t)=>1===t.length?(e=>t=>{const r=(0,n.getDecoratorsForClass)(t);let i=r.class;return i||(i=[],r.class=i),i.push(e),e(t)})(e)(t[0]):(e=>(t,r,...i)=>{var s,a,o;const c="function"==typeof t?"static":"instance",u="function"==typeof t[r]?"method":"property",l="static"===c?t:t.constructor,d=(0,n.getDecoratorsForClass)(l),h=null!==(s=null==d?void 0:d[c])&&void 0!==s?s:{};d[c]=h;let p=null!==(a=null==h?void 0:h[u])&&void 0!==a?a:{};h[u]=p;let f=null!==(o=null==p?void 0:p[r])&&void 0!==o?o:[];return p[r]=f,f.push(e),e(t,r,...i)})(e)(...t)}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/decorator.js"}],[4048,{"./decorator":4047,"./mixin-tracking":4049,"./mixins":4050,"./settings":4052},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasMixin=n.decorate=n.settings=n.mix=n.Mixin=void 0;var r=e("./mixins");Object.defineProperty(n,"Mixin",{enumerable:!0,get:function(){return r.Mixin}}),Object.defineProperty(n,"mix",{enumerable:!0,get:function(){return r.mix}});var i=e("./settings");Object.defineProperty(n,"settings",{enumerable:!0,get:function(){return i.settings}});var s=e("./decorator");Object.defineProperty(n,"decorate",{enumerable:!0,get:function(){return s.decorate}});var a=e("./mixin-tracking");Object.defineProperty(n,"hasMixin",{enumerable:!0,get:function(){return a.hasMixin}})}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/index.js"}],[4049,{"./util":4053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasMixin=n.registerMixins=n.getMixinsForClass=void 0;const r=e("./util"),i=new WeakMap;n.getMixinsForClass=e=>i.get(e);n.registerMixins=(e,t)=>i.set(e,t);n.hasMixin=(e,t)=>{if(e instanceof t)return!0;const n=e.constructor,s=new Set;let a=new Set;for(a.add(n);a.size>0;){if(a.has(t))return!0;a.forEach((e=>s.add(e)));const e=new Set;a.forEach((t=>{var n;const o=null!==(n=i.get(t))&&void 0!==n?n:(0,r.protoChain)(t.prototype).map((e=>e.constructor)).filter((e=>null!==e));o&&o.forEach((t=>{s.has(t)||a.has(t)||e.add(t)}))})),a=e}return!1}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/mixin-tracking.js"}],[4050,{"./decorator":4047,"./mixin-tracking":4049,"./proxy":4051,"./settings":4052,"./util":4053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mix=n.Mixin=void 0;const r=e("./proxy"),i=e("./settings"),s=e("./util"),a=e("./decorator"),o=e("./mixin-tracking");function c(...e){var t,n,c;const l=e.map((e=>e.prototype)),d=i.settings.initFunction;if(null!==d){const e=l.map((e=>e[d])).filter((e=>"function"==typeof e)),t=function(...t){for(let n of e)n.apply(this,t)},n={[d]:t};l.push(n)}function h(...t){for(const n of e)(0,s.copyProps)(this,new n(...t));null!==d&&"function"==typeof this[d]&&this[d].apply(this,t)}h.prototype="copy"===i.settings.prototypeStrategy?(0,s.hardMixProtos)(l,h):(0,r.softMixProtos)(l,h),Object.setPrototypeOf(h,"copy"===i.settings.staticsStrategy?(0,s.hardMixProtos)(e,null,["prototype"]):(0,r.proxyMix)(e,Function.prototype));let p=h;if("none"!==i.settings.decoratorInheritance){const r="deep"===i.settings.decoratorInheritance?(0,a.deepDecoratorSearch)(...e):(0,a.directDecoratorSearch)(...e);for(let e of null!==(t=null==r?void 0:r.class)&&void 0!==t?t:[]){const t=e(p);t&&(p=t)}u(null!==(n=null==r?void 0:r.static)&&void 0!==n?n:{},p),u(null!==(c=null==r?void 0:r.instance)&&void 0!==c?c:{},p.prototype)}return(0,o.registerMixins)(p,e),p}n.Mixin=c;const u=(e,t)=>{const n=e.property,r=e.method;if(n)for(let e in n)for(let r of n[e])r(t,e);if(r)for(let e in r)for(let n of r[e])n(t,e,Object.getOwnPropertyDescriptor(t,e))};n.mix=(...e)=>t=>{const n=c(...e.concat([t]));return Object.defineProperty(n,"name",{value:t.name,writable:!1}),n}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/mixins.js"}],[4051,{"./util":4053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.softMixProtos=n.proxyMix=n.getIngredientWithProp=void 0;const r=e("./util");n.getIngredientWithProp=(e,t)=>{const n=t.map((e=>(0,r.protoChain)(e)));let i=0,s=!0;for(;s;){s=!1;for(let r=t.length-1;r>=0;r--){const t=n[r][i];if(t!==undefined&&null!==t&&(s=!0,Object.getOwnPropertyDescriptor(t,e)!=undefined))return n[r][0]}i++}return undefined};n.proxyMix=(e,t=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>t,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(t,r)=>Object.getOwnPropertyDescriptor((0,n.getIngredientWithProp)(r,e)||{},r),defineProperty(){throw new Error("Cannot define new properties on Proxies created by ts-mixer")},has:(r,i)=>(0,n.getIngredientWithProp)(i,e)!==undefined||t[i]!==undefined,get:(r,i)=>((0,n.getIngredientWithProp)(i,e)||t)[i],set(t,r,i){const s=(0,n.getIngredientWithProp)(r,e);if(s===undefined)throw new Error("Cannot set new properties on Proxies created by ts-mixer");return s[r]=i,!0},deleteProperty(){throw new Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>e.map(Object.getOwnPropertyNames).reduce(((e,t)=>t.concat(e.filter((e=>t.indexOf(e)<0)))))});n.softMixProtos=(e,t)=>(0,n.proxyMix)([...e,{constructor:t}])}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/proxy.js"}],[4052,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.settings=void 0,n.settings={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/settings.js"}],[4053,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.flatten=n.unique=n.hardMixProtos=n.nearestCommonProto=n.protoChain=n.copyProps=void 0;n.copyProps=(e,t,n=[])=>{const r=Object.getOwnPropertyDescriptors(t);for(let e of n)delete r[e];Object.defineProperties(e,r)};n.protoChain=(e,t=[e])=>{const r=Object.getPrototypeOf(e);return null===r?t:(0,n.protoChain)(r,[...t,r])};n.nearestCommonProto=(...e)=>{if(0===e.length)return undefined;let t=undefined;const r=e.map((e=>(0,n.protoChain)(e)));for(;r.every((e=>e.length>0));){const e=r.map((e=>e.pop())),n=e[0];if(!e.every((e=>e===n)))break;t=n}return t};n.hardMixProtos=(e,t,r=[])=>{var i;const s=null!==(i=(0,n.nearestCommonProto)(...e))&&void 0!==i?i:Object.prototype,a=Object.create(s),o=(0,n.protoChain)(s);for(let t of e){let e=(0,n.protoChain)(t);for(let t=e.length-1;t>=0;t--){let i=e[t];-1===o.indexOf(i)&&((0,n.copyProps)(a,i,["constructor",...r]),o.push(i))}}return a.constructor=t,a};n.unique=e=>e.filter(((t,n)=>e.indexOf(t)==n));n.flatten=e=>0===e.length?[]:1===e.length?e[0]:e.reduce(((e,t)=>[...e,...t]))}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/schema-utils>ts-mixer",file:"node_modules/ts-mixer/dist/cjs/util.js"}],[4057,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,i,s,a=void 0,o=(r=Object.prototype.toString,i=Object.prototype.hasOwnProperty,{Class:function(e){return r.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,t){return i.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return 0|e},ToUint32:function(e){return e>>>0}}),c=Math.LN2,u=Math.abs,l=Math.floor,d=Math.log,h=Math.min,p=Math.pow,f=Math.round;function m(e){if(g&&s){var t,n=g(e);for(t=0;t<n.length;t+=1)s(e,n[t],{value:e[n[t]],writable:!1,enumerable:!1,configurable:!1})}}s=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,n){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return o.HasProperty(n,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,n.get),o.HasProperty(n,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,n.set),o.HasProperty(n,"value")&&(e[t]=n.value),e};var g=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,n=[];for(t in e)o.HasOwnProperty(e,t)&&n.push(t);return n};function y(e,t){var n=32-t;return e<<n>>n}function _(e,t){var n=32-t;return e<<n>>>n}function b(e){return[255&e]}function w(e){return y(e[0],8)}function v(e){return[255&e]}function S(e){return _(e[0],8)}function E(e){return[(e=f(Number(e)))<0?0:e>255?255:255&e]}function T(e){return[e>>8&255,255&e]}function k(e){return y(e[0]<<8|e[1],16)}function M(e){return[e>>8&255,255&e]}function A(e){return _(e[0]<<8|e[1],16)}function P(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function x(e){return y(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function R(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function C(e){return _(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function I(e,t,n){var r,i,s,a,o,f,m,g=(1<<t-1)-1;function y(e){var t=l(e),n=e-t;return n<.5?t:n>.5||t%2?t+1:t}for(e!=e?(i=(1<<t)-1,s=p(2,n-1),r=0):e===Infinity||e===-Infinity?(i=(1<<t)-1,s=0,r=e<0?1:0):0===e?(i=0,s=0,r=1/e==-Infinity?1:0):(r=e<0,(e=u(e))>=p(2,1-g)?(i=h(l(d(e)/c),1023),(s=y(e/p(2,i)*p(2,n)))/p(2,n)>=2&&(i+=1,s=1),i>g?(i=(1<<t)-1,s=0):(i+=g,s-=p(2,n))):(i=0,s=y(e/p(2,1-g-n)))),o=[],a=n;a;a-=1)o.push(s%2?1:0),s=l(s/2);for(a=t;a;a-=1)o.push(i%2?1:0),i=l(i/2);for(o.push(r?1:0),o.reverse(),f=o.join(""),m=[];f.length;)m.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return m}function O(e,t,n){var r,i,s,a,o,c,u,l,d=[];for(r=e.length;r;r-=1)for(s=e[r-1],i=8;i;i-=1)d.push(s%2?1:0),s>>=1;return d.reverse(),a=d.join(""),o=(1<<t-1)-1,c=parseInt(a.substring(0,1),2)?-1:1,u=parseInt(a.substring(1,1+t),2),l=parseInt(a.substring(1+t),2),u===(1<<t)-1?0!==l?NaN:c*Infinity:u>0?c*p(2,u-o)*(1+l/p(2,n)):0!==l?c*p(2,-(o-1))*(l/p(2,n)):c<0?-0:0}function N(e){return O(e,11,52)}function j(e){return I(e,11,52)}function L(e){return O(e,8,23)}function D(e){return I(e,8,23)}!function(){var e=function(e){if((e=o.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var t;for(this.byteLength=e,this._bytes=[],this._bytes.length=e,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;m(this)};n.ArrayBuffer=n.ArrayBuffer||e;var t=function(){};function r(n,r,i){var c;return c=function(t,n,r){var i,a,u,l;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===c)for(i=arguments[0],this.length=i.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,u=0;u<this.length;u+=1)this._setter(u,i._getter(u));else if("object"!=typeof arguments[0]||(arguments[0]instanceof e||"ArrayBuffer"===o.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof e||"ArrayBuffer"===o.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=t,this.byteOffset=o.ToUint32(n),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=o.ToUint32(r),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(a=arguments[0],this.length=o.ToUint32(a.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0,u=0;u<this.length;u+=1)l=a[u],this._setter(u,Number(l));else{if(this.length=o.ToInt32(arguments[0]),r<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new e(this.byteLength),this.byteOffset=0}this.constructor=c,m(this),function(e){if(s){if(e.length>1e5)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)n(t)}function n(t){s(e,t,{get:function(){return e._getter(t)},set:function(n){e._setter(t,n)},enumerable:!0,configurable:!1})}}(this)},c.prototype=new t,c.prototype.BYTES_PER_ELEMENT=n,c.prototype._pack=r,c.prototype._unpack=i,c.BYTES_PER_ELEMENT=n,c.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=o.ToUint32(e))>=this.length)return a;var t,n,r=[];for(t=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,n+=1)r.push(this.buffer._bytes[n]);return this._unpack(r)},c.prototype.get=c.prototype._getter,c.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=o.ToUint32(e))>=this.length)return a;var n,r,i=this._pack(t);for(n=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,r+=1)this.buffer._bytes[r]=i[n]},c.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var n,r,i,s,a,c,u,l,d,h;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(n=arguments[0],(i=o.ToUint32(arguments[1]))+n.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(l=this.byteOffset+i*this.BYTES_PER_ELEMENT,d=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){for(h=[],a=0,c=n.byteOffset;a<d;a+=1,c+=1)h[a]=n.buffer._bytes[c];for(a=0,u=l;a<d;a+=1,u+=1)this.buffer._bytes[u]=h[a]}else for(a=0,c=n.byteOffset,u=l;a<d;a+=1,c+=1,u+=1)this.buffer._bytes[u]=n.buffer._bytes[c]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(r=arguments[0],s=o.ToUint32(r.length),(i=o.ToUint32(arguments[1]))+s>this.length)throw new RangeError("Offset plus length of array is out of range");for(a=0;a<s;a+=1)c=r[a],this._setter(i+a,Number(c))}},c.prototype.subarray=function(e,t){function n(e,t,n){return e<t?t:e>n?n:e}e=o.ToInt32(e),t=o.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var r=(t=n(t,0,this.length))-e;return r<0&&(r=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,r)},c}var i=r(1,b,w),c=r(1,v,S),u=r(1,E,S),l=r(2,T,k),d=r(2,M,A),h=r(4,P,x),p=r(4,R,C),f=r(4,D,L),g=r(8,j,N);n.Int8Array=n.Int8Array||i,n.Uint8Array=n.Uint8Array||c,n.Uint8ClampedArray=n.Uint8ClampedArray||u,n.Int16Array=n.Int16Array||l,n.Uint16Array=n.Uint16Array||d,n.Int32Array=n.Int32Array||h,n.Uint32Array=n.Uint32Array||p,n.Float32Array=n.Float32Array||f,n.Float64Array=n.Float64Array||g}(),function(){function e(e,t){return o.IsCallable(e.get)?e.get(t):e[t]}var t,r=(t=new n.Uint16Array([4660]),18===e(new n.Uint8Array(t.buffer),0)),i=function(e,t,r){if(0===arguments.length)e=new n.ArrayBuffer(0);else if(!(e instanceof n.ArrayBuffer||"ArrayBuffer"===o.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new n.ArrayBuffer(0),this.byteOffset=o.ToUint32(t),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:o.ToUint32(r),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");m(this)};function s(t){return function(i,s){if((i=o.ToUint32(i))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");i+=this.byteOffset;var a,c=new n.Uint8Array(this.buffer,i,t.BYTES_PER_ELEMENT),u=[];for(a=0;a<t.BYTES_PER_ELEMENT;a+=1)u.push(e(c,a));return Boolean(s)===Boolean(r)&&u.reverse(),e(new t(new n.Uint8Array(u).buffer),0)}}function a(t){return function(i,s,a){if((i=o.ToUint32(i))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var c,u=new t([s]),l=new n.Uint8Array(u.buffer),d=[];for(c=0;c<t.BYTES_PER_ELEMENT;c+=1)d.push(e(l,c));Boolean(a)===Boolean(r)&&d.reverse(),new n.Uint8Array(this.buffer,i,t.BYTES_PER_ELEMENT).set(d)}}i.prototype.getUint8=s(n.Uint8Array),i.prototype.getInt8=s(n.Int8Array),i.prototype.getUint16=s(n.Uint16Array),i.prototype.getInt16=s(n.Int16Array),i.prototype.getUint32=s(n.Uint32Array),i.prototype.getInt32=s(n.Int32Array),i.prototype.getFloat32=s(n.Float32Array),i.prototype.getFloat64=s(n.Float64Array),i.prototype.setUint8=a(n.Uint8Array),i.prototype.setInt8=a(n.Int8Array),i.prototype.setUint16=a(n.Uint16Array),i.prototype.setInt16=a(n.Int16Array),i.prototype.setUint32=a(n.Uint32Array),i.prototype.setInt32=a(n.Int32Array),i.prototype.setFloat32=a(n.Float32Array),i.prototype.setFloat64=a(n.Float64Array),n.DataView=n.DataView||i}()}}},{package:"browserify>concat-stream>typedarray",file:"node_modules/typedarray/index.js"}],[4058,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/concat.js"}],[4059,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/equals.js"}],[4060,{multibase:3559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{encoding:r}=e("multibase"),i=new TextEncoder;t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?i.encode(e):"ascii"===t?function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e):r(t).decode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/from-string.js"}],[4061,{multibase:3559},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const{encoding:r}=e("multibase"),i=new TextDecoder("utf8");t.exports=function(e,t="utf8"){return"utf8"===t||"utf-8"===t?i.decode(e):"ascii"===t?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):r(t).encode(e)}}}},{package:"@ensdomains/content-hash>cids>uint8arrays",file:"node_modules/uint8arrays/to-string.js"}],[4094,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var t,n,r,i=String.fromCharCode;function s(e){for(var t,n,r=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function a(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function o(e,t){return i(e>>t&63|128)}function c(e){if(!(4294967168&e))return i(e);var t="";return 4294965248&e?4294901760&e?4292870144&e||(t=i(e>>18&7|240),t+=o(e,12),t+=o(e,6)):(a(e),t=i(e>>12&15|224),t+=o(e,6)):t=i(e>>6&31|192),t+=i(63&e|128)}function u(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function l(){var e,i;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(e=255&t[r],r++,!(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if((i=(15&e)<<12|u()<<6|u())>=2048)return a(i),i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=s(e),n=t.length,r=-1,i="";++r<n;)i+=c(t[r]);return i},e.decode=function(e){t=s(e),n=t.length,r=0;for(var a,o=[];!1!==(a=l());)o.push(a);return function(e){for(var t,n=e.length,r=-1,s="";++r<n;)(t=e[r])>65535&&(s+=i((t-=65536)>>>10&1023|55296),t=56320|1023&t),s+=i(t);return s}(o)}}(void 0===n?this.utf8={}:n)}}},{package:"@metamask/keyring-controller>ethereumjs-wallet>utf8",file:"node_modules/utf8/utf8.js"}],[41,{loglevel:3515},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){r((r=>{n.error&&i.default.debug("Error in RPC response:\n",n),t.isMetamaskInternal||(i.default.info(`RPC (${e.origin}): ${t.method} -> ${n.error?"error":"success"}`),r())}))}};var r,i=(r=e("loglevel"))&&r.__esModule?r:{default:r}}}},{package:"$root$",file:"app/scripts/lib/createLoggerMiddleware.js"}],[4118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n){var s,a=0,o=0,c=n=n||0,u=t.length;do{if(c>=u||o>49)throw e.bytes=0,new RangeError("Could not decode varint");s=t[c++],a+=o<28?(s&i)<<o:(s&i)*Math.pow(2,o),o+=7}while(s>=r);return e.bytes=c-n,a};var r=128,i=127}}},{package:"sass-embedded>varint",file:"node_modules/varint/decode.js"}],[4119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function e(t,n,a){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var o=a=a||0;for(;t>=s;)n[a++]=255&t|r,t/=128;for(;t&i;)n[a++]=255&t|r,t>>>=7;return n[a]=0|t,e.bytes=a-o+1,n};var r=128,i=-128,s=Math.pow(2,31)}}},{package:"sass-embedded>varint",file:"node_modules/varint/encode.js"}],[4120,{"./decode.js":4118,"./encode.js":4119,"./length.js":4121},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"sass-embedded>varint",file:"node_modules/varint/index.js"}],[4121,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=Math.pow(2,7),i=Math.pow(2,14),s=Math.pow(2,21),a=Math.pow(2,28),o=Math.pow(2,35),c=Math.pow(2,42),u=Math.pow(2,49),l=Math.pow(2,56),d=Math.pow(2,63);t.exports=function(e){return e<r?1:e<i?2:e<s?3:e<a?4:e<o?5:e<c?6:e<u?7:e<l?8:e<d?9:10}}}},{package:"sass-embedded>varint",file:"node_modules/varint/length.js"}],[4129,{util:4098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){n.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,n.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding",file:"node_modules/web-encoding/src/lib.js"}],[4176,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=n.AUTO_LOCK_TIMEOUT_ALARM=void 0;n.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM",n.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$",file:"shared/constants/alarms.js"}],[4187,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LOG_EVENT=void 0;n.LOG_EVENT={VERSION_UPDATE:"Extension version update"}}}},{package:"$root$",file:"shared/constants/logs.ts"}],[4189,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.methodsWithConfirmation=n.methodsRequiringNetworkSwitch=void 0;const r=n.methodsRequiringNetworkSwitch=["eth_sendTransaction","eth_sendRawTransaction","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_watchAsset","eth_signTypedData_v4","personal_sign"];n.methodsWithConfirmation=[...r,"wallet_requestPermissions","wallet_requestSnaps","wallet_snap","wallet_invokeSnap","eth_decrypt","eth_sign","eth_requestAccounts","eth_getEncryptionPublicKey"]}}},{package:"$root$",file:"shared/constants/methods-tags.ts"}],[4192,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorAction=n.OffscreenCommunicationTarget=n.OffscreenCommunicationEvents=n.LedgerAction=n.KnownOrigins=void 0;n.OffscreenCommunicationTarget=function(e){return e.trezorOffscreen="trezor-offscreen",e.ledgerOffscreen="ledger-offscreen",e.latticeOffscreen="lattice-offscreen",e.extension="extension-offscreen",e}({}),n.OffscreenCommunicationEvents=function(e){return e.trezorDeviceConnect="trezor-device-connect",e.ledgerDeviceConnect="ledger-device-connect",e}({}),n.TrezorAction=function(e){return e.init="trezor-init",e.dispose="trezor-dispose",e.getPublicKey="trezor-get-public-key",e.signTransaction="trezor-sign-transaction",e.signMessage="trezor-sign-message",e.signTypedData="trezor-sign-typed-data",e}({}),n.LedgerAction=function(e){return e.makeApp="ledger-make-app",e.updateTransport="ledger-update-transport",e.unlock="ledger-unlock",e.getPublicKey="ledger-unlock",e.signTransaction="ledger-sign-transaction",e.signMessage="ledger-sign-message",e.signTypedData="ledger-sign-typed-data",e}({}),n.KnownOrigins=function(e){return e.lattice="https://lattice.gridplus.io",e.ledger="https://metamask.github.io",e}({})}}},{package:"$root$",file:"shared/constants/offscreen-communication.ts"}],[42,{"../../../shared/modules/mv3.utils":4228,"eth-rpc-errors":2897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),i=e("../../../shared/modules/mv3.utils");n.default=(e,t,n,s)=>async a=>{if(t._writableState.ended)return;if(!e[a.method])return void t.write({jsonrpc:"2.0",error:r.ethErrors.rpc.methodNotFound({message:`${a.method} not found`}),id:a.id});let o,c;try{o=await e[a.method](...a.params)}catch(e){c=e}finally{i.isManifestV3&&n&&"getState"!==a.method&&s.set(n.getState())}t._writableState.ended?c&&console.error(c):c?t.write({jsonrpc:"2.0",error:(0,r.serializeError)(c,{shouldIncludeStack:!0}),id:a.id}):t.write({jsonrpc:"2.0",result:o,id:a.id})}}}},{package:"$root$",file:"app/scripts/lib/createMetaRPCHandler.js"}],[4227,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSmartTransactionMetricsProperties=void 0;n.getSmartTransactionMetricsProperties=(e,t)=>{const n=e.getIsSmartTransaction(),r={is_smart_transaction:n};if(!n)return r;const i=e.getSmartTransactionByMinedTxHash(t.hash),s=null==i?void 0:i.statusMetadata;return s?(r.smart_transaction_duplicated=s.duplicated,r.smart_transaction_timed_out=s.timedOut,r.smart_transaction_proxied=s.proxied,r):r}}}},{package:"$root$",file:"shared/modules/metametrics.ts"}],[43,{"./middleware/pending":61,"@metamask/eth-json-rpc-middleware":1146,"json-rpc-engine":3328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({version:e,getAccounts:t,processTransaction:n,processEthSignMessage:a,processTypedMessage:o,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:l,processDecryptMessage:d,processEncryptionPublicKey:h,getPendingNonce:p,getPendingTransactionByHash:f}){return(0,r.mergeMiddleware)([(0,r.createScaffoldMiddleware)({eth_syncing:!1,web3_clientVersion:`MetaMask/v${e}`}),(0,i.createWalletMiddleware)({getAccounts:t,processTransaction:n,processEthSignMessage:a,processTypedMessage:o,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:l,processDecryptMessage:d,processEncryptionPublicKey:h}),(0,s.createPendingNonceMiddleware)({getPendingNonce:p}),(0,s.createPendingTxMiddleware)({getPendingTransactionByHash:f})])};var r=e("json-rpc-engine"),i=e("@metamask/eth-json-rpc-middleware"),s=e("./middleware/pending")}}},{package:"$root$",file:"app/scripts/lib/createMetamaskMiddleware.js"}],[44,{loglevel:3515,"webextension-polyfill":4162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({location:e,registerOnboarding:t}){return async function(n,s,a,o){try{if("wallet_registerOnboarding"!==n.method)return void a();n.tabId&&n.tabId!==i.default.tabs.TAB_ID_NONE?await t(e,n.tabId):r.default.debug(`'wallet_registerOnboarding' message from ${e} ignored due to missing tabId`),s.result=!0,o()}catch(e){o(e)}}};var r=s(e("loglevel")),i=s(e("webextension-polyfill"));function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/createOnboardingMiddleware.js"}],[45,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){t.origin=e.origin,r()}}}}},{package:"$root$",file:"app/scripts/lib/createOriginMiddleware.js"}],[46,{"../../../shared/constants/app":4178,"../../../shared/constants/metametrics":4188,"../../../shared/constants/security-provider":4196,"../../../shared/constants/transaction":4203,"../../../ui/helpers/utils/metrics":5009,"./snap-keyring/metrics":89,"@metamask/controller-utils":1094,"eth-rpc-errors":2897,"ethereumjs-util":2928},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({trackEvent:e,getMetricsState:t,rateLimitTimeout:n=3e5,rateLimitSamplePercent:y=.001,globalRateLimitTimeout:_=3e5,globalRateLimitMaxAmount:b=10,getAccountType:w,getDeviceModel:v,snapAndHardwareMessenger:S,appStateController:E}){return async function(T,k,M){const{origin:A,method:P}=T,x=p[P]??h.RANDOM_SAMPLE;let R;switch(x){case h.TIMEOUT:R=void 0!==m[P];break;case h.NON_RATE_LIMITED:R=!1;break;case h.BLOCKED:R=!0;break;default:case h.RANDOM_SAMPLE:R=Math.random()>=y}const C=b>0&&g>=b,I=!0===t().participateInMetaMetrics,O=f[P],N={},j=A!==a.ORIGIN_METAMASK&&!R&&!C&&!0===I;if(j){const t=O?O.REQUESTED:o.MetaMetricsEventName.ProviderMethodCalled;if(t===o.MetaMetricsEventName.SignatureRequested){var L,D,U,B,q;let e;var F,$;if(N.signature_type=P,(0,s.isValidAddress)(null==T||null===(L=T.params)||void 0===L?void 0:L[1]))e=null==T||null===(F=T.params)||void 0===F?void 0:F[0];else e=null==T||null===($=T.params)||void 0===$?void 0:$[1];null!==(D=T.securityAlertResponse)&&void 0!==D&&D.providerRequestsCount&&Object.keys(T.securityAlertResponse.providerRequestsCount).forEach((e=>{N[`ppom_${e}_count`]=T.securityAlertResponse.providerRequestsCount[e]})),N.security_alert_response=(null===(U=T.securityAlertResponse)||void 0===U?void 0:U.result_type)??c.BlockaidResultType.NotApplicable,N.security_alert_reason=(null===(B=T.securityAlertResponse)||void 0===B?void 0:B.reason)??c.BlockaidReason.notApplicable,null!==(q=T.securityAlertResponse)&&void 0!==q&&q.description&&(N.security_alert_description=T.securityAlertResponse.description);const t=await(0,d.getSnapAndHardwareInfoForMetrics)(w,v,S);Object.assign(N,t);try{if(P===a.MESSAGE_TYPE.PERSONAL_SIGN){const{isSIWEMessage:t}=(0,r.detectSIWE)({data:e});t&&(N.ui_customizations=(N.ui_customizations||[]).concat(o.MetaMetricsEventUiCustomization.Siwe))}}catch(e){console.warn(`createRPCMethodTrackingMiddleware: Errored - ${e}`)}}else N.method=P;e({event:t,category:o.MetaMetricsEventCategory.InpageProvider,referrer:{url:A},properties:N}),x===h.TIMEOUT&&(m[P]=setTimeout((()=>{delete m[P]}),n)),g+=1,setTimeout((()=>{g-=1}),_)}M((async t=>{var n,r,s,d;if(!1===j||void 0===O)return t();const h=P===a.MESSAGE_TYPE.ETH_SIGN&&(null===(n=k.error)||void 0===n?void 0:n.code)===i.errorCodes.rpc.methodNotFound;let p;h?(p=O.FAILED,N.error=k.error):(null===(r=k.error)||void 0===r?void 0:r.code)===i.errorCodes.provider.userRejectedRequest?p=O.REJECTED:(null===(s=k.error)||void 0===s?void 0:s.code)===i.errorCodes.rpc.internal&&"Request rejected by user or snap."===(null===(d=k.error)||void 0===d?void 0:d.message)?(p=O.REJECTED,N.status=k.error.message):p=O.APPROVED;let f={};if(!h&&u.SIGNING_METHODS.includes(P)){var m;const e=E.getSignatureSecurityAlertResponse(null===(m=T.securityAlertResponse)||void 0===m?void 0:m.securityAlertId);f=(0,l.getBlockaidMetricsProps)({securityAlertResponse:e})}const g={...N,...f,security_alert_reason:f.security_alert_response===c.BlockaidResultType.Benign?"":f.security_alert_reason};return e({event:p,category:o.MetaMetricsEventCategory.InpageProvider,referrer:{url:A},properties:g}),t()}))}};var r=e("@metamask/controller-utils"),i=e("eth-rpc-errors"),s=e("ethereumjs-util"),a=e("../../../shared/constants/app"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/security-provider"),u=e("../../../shared/constants/transaction"),l=e("../../../ui/helpers/utils/metrics"),d=e("./snap-keyring/metrics");const h={TIMEOUT:"timeout",BLOCKED:"blocked",NON_RATE_LIMITED:"non_rate_limited",RANDOM_SAMPLE:"random_sample"},p={[a.MESSAGE_TYPE.ETH_SIGN]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.PERSONAL_SIGN]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_DECRYPT]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:h.NON_RATE_LIMITED,[a.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:h.TIMEOUT,[a.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:h.TIMEOUT,[a.MESSAGE_TYPE.SEND_METADATA]:h.BLOCKED,[a.MESSAGE_TYPE.ETH_CHAIN_ID]:h.BLOCKED,[a.MESSAGE_TYPE.ETH_ACCOUNTS]:h.BLOCKED,[a.MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE]:h.BLOCKED,[a.MESSAGE_TYPE.GET_PROVIDER_STATE]:h.BLOCKED},f={[a.MESSAGE_TYPE.ETH_SIGN]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,FAILED:o.MetaMetricsEventName.SignatureFailed,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.PERSONAL_SIGN]:{APPROVED:o.MetaMetricsEventName.SignatureApproved,REJECTED:o.MetaMetricsEventName.SignatureRejected,REQUESTED:o.MetaMetricsEventName.SignatureRequested},[a.MESSAGE_TYPE.ETH_DECRYPT]:{APPROVED:o.MetaMetricsEventName.DecryptionApproved,REJECTED:o.MetaMetricsEventName.DecryptionRejected,REQUESTED:o.MetaMetricsEventName.DecryptionRequested},[a.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY]:{APPROVED:o.MetaMetricsEventName.EncryptionPublicKeyApproved,REJECTED:o.MetaMetricsEventName.EncryptionPublicKeyRejected,REQUESTED:o.MetaMetricsEventName.EncryptionPublicKeyRequested},[a.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested},[a.MESSAGE_TYPE.WALLET_REQUEST_PERMISSIONS]:{APPROVED:o.MetaMetricsEventName.PermissionsApproved,REJECTED:o.MetaMetricsEventName.PermissionsRejected,REQUESTED:o.MetaMetricsEventName.PermissionsRequested}},m={};let g=0}}},{package:"$root$",file:"app/scripts/lib/createRPCMethodTrackingMiddleware.js"}],[47,{"promise-to-callback":3661,"readable-stream":3890},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new a(e,t)};var r,i=e("readable-stream"),s=(r=e("promise-to-callback"))&&r.__esModule?r:{default:r};class a extends i.Writable{constructor(e,t){super({objectMode:!0,...t}),this._asyncWriteFn=e}_write(e,t,n){(0,s.default)(this._asyncWriteFn(e,t))(n)}}}}},{package:"$root$",file:"app/scripts/lib/createStreamSink.js"}],[48,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,r){t.tabId=e.tabId,r()}}}}},{package:"$root$",file:"app/scripts/lib/createTabIdMiddleware.js"}],[49,{"@metamask/browser-passworder":1086},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encryptorFactory=void 0;var r=e("@metamask/browser-passworder");const i=e=>async(t,n,i,s)=>(0,r.encrypt)(t,n,i,s,{algorithm:"PBKDF2",params:{iterations:e}}),s=e=>async(t,n,i)=>(0,r.encryptWithDetail)(t,n,i,{algorithm:"PBKDF2",params:{iterations:e}}),a=e=>async(t,n,i,s)=>(0,r.keyFromPassword)(t,n,i,s??{algorithm:"PBKDF2",params:{iterations:e}}),o=e=>t=>(0,r.isVaultUpdated)(t,{algorithm:"PBKDF2",params:{iterations:e}});n.encryptorFactory=e=>({encrypt:i(e),encryptWithKey:r.encryptWithKey,encryptWithDetail:s(e),decrypt:r.decrypt,decryptWithKey:r.decryptWithKey,decryptWithDetail:r.decryptWithDetail,keyFromPassword:a(e),isVaultUpdated:o(e),importKey:r.importKey,exportKey:r.exportKey,generateSalt:r.generateSalt})}}},{package:"$root$",file:"app/scripts/lib/encryptor-factory.ts"}],[5,{"../../../shared/constants/network":4190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SINGLE_CALL_BALANCES_ADDRESSES=void 0;var r=e("../../../shared/constants/network");n.SINGLE_CALL_BALANCES_ADDRESSES={[r.CHAIN_IDS.MAINNET]:"0xb1f8e55c7f64d203c1400b9d8555d050f94adf39",[r.CHAIN_IDS.GOERLI]:"0x9788C4E93f9002a7ad8e72633b11E8d1ecd51f9b",[r.CHAIN_IDS.SEPOLIA]:"",[r.CHAIN_IDS.BSC]:"0x2352c63A83f9Fd126af8676146721Fa00924d7e4",[r.CHAIN_IDS.OPTIMISM]:"0xB1c568e9C3E6bdaf755A60c7418C269eb11524FC",[r.CHAIN_IDS.POLYGON]:"0x2352c63A83f9Fd126af8676146721Fa00924d7e4",[r.CHAIN_IDS.AVALANCHE]:"0xD023D153a0DFa485130ECFdE2FAA7e612EF94818",[r.CHAIN_IDS.FANTOM]:"0x07f697424ABe762bB808c109860c04eA488ff92B",[r.CHAIN_IDS.ARBITRUM]:"0x151E24A486D7258dd7C33Fb67E4bB01919B7B32c",[r.CHAIN_IDS.BLAST]:"0xfd5730e96f9dffae40d99b77015bd42816280998",[r.CHAIN_IDS.LINEA_GOERLI]:"0x10dAd7Ca3921471f616db788D9300DC97Db01783",[r.CHAIN_IDS.LINEA_MAINNET]:"0xF62e6a41561b3650a69Bb03199C735e3E3328c0D",[r.CHAIN_IDS.AURORA]:"0x1286415D333855237f89Df27D388127181448538",[r.CHAIN_IDS.BASE]:"0x6AA75276052D96696134252587894ef5FFA520af",[r.CHAIN_IDS.ZKSYNC_ERA]:"0x458fEd3144680a5b8bcfaa0F9594aa19B4Ea2D34"}}}},{package:"$root$",file:"app/scripts/constants/contracts.ts"}],[50,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"resolver",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"label",type:"bytes32"},{name:"owner",type:"address"}],name:"setSubnodeOwner",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"ttl",type:"uint64"}],name:"setTTL",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"ttl",outputs:[{name:"",type:"uint64"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"resolver",type:"address"}],name:"setResolver",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"owner",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"label",type:"bytes32"},{indexed:!1,name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"ttl",type:"uint64"}],name:"NewTTL",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/registry.js"}],[51,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=[{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes32"}],name:"setContent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"},{name:"value",type:"string"}],name:"setText",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"setPubkey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"hash",type:"bytes"}],name:"setContenthash",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"},{name:"key",type:"string"}],name:"text",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"contentType",type:"uint256"},{name:"data",type:"bytes"}],name:"setABI",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"name",type:"string"}],name:"setName",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"contenthash",outputs:[{name:"",type:"bytes"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"node",type:"bytes32"}],name:"pubkey",outputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"node",type:"bytes32"},{name:"addr",type:"address"}],name:"setAddr",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"ensAddr",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!0,name:"contentType",type:"uint256"}],name:"ABIChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"x",type:"bytes32"},{indexed:!1,name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"indexedKey",type:"string"},{indexed:!1,name:"key",type:"string"}],name:"TextChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"node",type:"bytes32"},{indexed:!1,name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"}]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/contracts/resolver.js"}],[52,{"./contracts/registry":50,"./contracts/resolver":51,"@ensdomains/content-hash":333,"@metamask/ethjs-contract":1259,"@metamask/ethjs-query":1263,"eth-ens-namehash":2865},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=async function({provider:e,name:t}){const n=new i.default(e),u=r.default.hash(t),d=new s.default(n),h=Number.parseInt(await n.net_version(),10),p=function(e){switch(e){case 1:case 3:case 4:case 5:case 6:return"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";default:return null}}(h);if(!p)throw new Error(`EnsIpfsResolver - no known ens-ipfs registry for chainId "${h}"`);const f=d(o.default).at(p),m=(await f.resolver(u))[0];if(l(m))throw new Error(`EnsIpfsResolver - no resolver found for name "${t}"`);const g=d(c.default).at(m),y=await g.supportsInterface("0xbc1c58d1"),_=await g.supportsInterface("0xd8389dc5");if(y[0]){const e=(await g.contenthash(u))[0];let t=a.default.decode(e);const n=a.default.getCodec(e);return"ipfs-ns"!==n&&"ipns-ns"!==n||(t=a.default.helpers.cidV0ToV1Base32(t)),{type:n,hash:t}}if(_[0]){const e=(await g.content(u))[0];if(l(e))throw new Error(`EnsIpfsResolver - no content ID found for name "${t}"`);return{type:"swarm-ns",hash:e.slice(2)}}throw new Error(`EnsIpfsResolver - the resolver for name "${t}" is not standard, it should either supports contenthash() or content()`)};var r=u(e("eth-ens-namehash")),i=u(e("@metamask/ethjs-query")),s=u(e("@metamask/ethjs-contract")),a=u(e("@ensdomains/content-hash")),o=u(e("./contracts/registry")),c=u(e("./contracts/resolver"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return[undefined,null,"0x","0x0","0x0000000000000000000000000000000000000000000000000000000000000000"].includes(e)}}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/resolver.js"}],[529,{"@ethereumjs/tx":395,"@ethereumjs/util":407,"@keystonehq/bc-ur-registry-eth":534,buffer:2666,hdkey:3277,rlp:3922,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e("hdkey")),s=e("@ethereumjs/util"),a=r(e("rlp")),o=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");const l="QR Hardware Wallet Device",d="m",h="0/*";var p,f;!function(e){e.hd="hd",e.pubkey="pubkey"}(p||(p={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(f||(f={}));class m{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=l,this.requestSignature=async(e,t,n,r)=>{const i=await this.getInteraction().requestSignature(t,n,r),s=i.getRequestId(),a=i.getSignature();if(s){if(u.stringify(s)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:a.slice(0,32),s:a.slice(32,64),v:a.slice(64)}},this.__readCryptoHDKey=e=>{var t,n;const r=`m/${e.getOrigin().getPath()}`,i=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),s=(null==(n=e.getChildren())?void 0:n.getPath())||h,a=e.getName();if(e.getNote()===f.standard?this.keyringAccount=f.standard:e.getNote()===f.ledger_legacy&&(this.keyringAccount=f.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const o=e.getBip32Key();this.xfp=i,this.xpub=o,this.hdPath=r,this.childrenPath=s,a!==undefined&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,n;const r=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!r)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=r,this.initialized=!0;let i=!1;const a=e.getOutputDescriptors();if(!a||0===a.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(a.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(n=e.getOutputDescriptors())||n.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),n=`M/${t.getOrigin().getPath()}`,r="0x"+s.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===f.ledger_live&&(this.keyringAccount=f.ledger_live),this.paths[s.toChecksumAddress(r)]===undefined&&(i=!0),this.paths[s.toChecksumAddress(r)]=n}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,n=t+this.perPage,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex(d,e);r.push({address:t,balance:null,index:e}),this.indexes[s.toChecksumAddress(t)]=e}return r},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,n=t+this.perPage,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex(d,e);r.push({address:t,balance:null,index:e})}return this.page+=e,r},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===p.hd){this.checkKeyring(),this.hdk||(this.hdk=i.fromExtendedKey(this.xpub));const n=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),r=this.hdk.derive(`${e}/${n}`),a="0x"+s.publicToAddress(r.publicKey,!0).toString("hex");return s.toChecksumAddress(a)}{const e=Object.keys(this.paths)[t];if(e)return s.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=p.hd,this.keyringAccount=f.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=h,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===c.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=p.hd,this.__readCryptoHDKey(e)):(this.keyringMode=p.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||p.hd,this.keyringAccount=e.keyringAccount||f.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||h)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,n=t+e,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex(d,e);r.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(r),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===p.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,n){const r=0===n.type?c.DataType.transaction:c.DataType.typedTransaction;let i;i=0===n.type?t.from(a.encode(n.getMessageToSign(!1))):n.getMessageToSign(!1);const s=await this._pathFromAddress(e),l=Number(n.common.chainId()),d=u.v4(),h=c.EthSignRequest.constructETHRequest(i,r,s,this.xfp,d,l),{r:p,s:f,v:m}=await this.requestSignature(d,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return o.TransactionFactory.fromTxData({...n.toJSON(),type:n.type,r:p,s:f,v:m},{common:n.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,n){const r=s.stripHexPrefix(n),i=await this._pathFromAddress(e),a=u.v4(),o=c.EthSignRequest.constructETHRequest(t.from(r,"hex"),c.DataType.personalMessage,i,this.xfp,a,undefined,e),{r:l,s:d,v:h}=await this.requestSignature(a,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([l,d,h]).toString("hex")}async signTypedData(e,n){const r=await this._pathFromAddress(e),i=u.v4(),s=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(n),"utf-8"),c.DataType.typedData,r,this.xfp,i,undefined,e),{r:a,s:o,v:l}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([a,o,l]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===p.hd){const t=s.toChecksumAddress(e);let n=this.indexes[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(d,e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",n.toString()).replace(/\*/g,"0")}`}{const t=s.toChecksumAddress(e),n=this.paths[t];if(void 0===n)throw new Error("Unknown address");return n}}}m.type=l,n.BaseKeyring=m}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[53,{"../../../../shared/modules/fetch-with-timeout":4223,"./resolver":52,"base32-encode":2568,"base64-js":2569,"webextension-polyfill":4162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({provider:e,getCurrentChainId:t,getIpfsGateway:n,getUseAddressBarEnsResolution:a}){const c=l.map((e=>`*://*.${e}/*`));return s.default.webRequest.onErrorOccurred.addListener(d,{urls:c,types:["main_frame"]}),{remove(){s.default.webRequest.onErrorOccurred.removeListener(d)}};async function d(c){const{tabId:d,url:h}=c;if(-1===d||"0x1"!==t())return;const{hostname:p,pathname:f,search:m,hash:g}=new URL(h),y=p.split("."),_=y[y.length-1];l.includes(_)&&async function({tabId:t,name:c,pathname:l,search:d,fragment:h}){const p=n(),f=a(),m=`https://app.ens.domains/name/${c}`;f&&p&&s.default.tabs.update(t,{url:"loading.html"});let g=m;0;try{const{type:t,hash:n}=await(0,o.default)({provider:e,name:c});if("ipfs-ns"===t||"ipns-ns"===t){if(""===p)return void(g=null);const e=`https://${n}.${t.slice(0,4)}.${p}${l}${d||""}${h||""}`;try{200===(await u(e,{method:"HEAD"})).status&&(g=e)}catch(e){console.warn(e)}}else if("swarm-ns"===t)g=`https://swarm-gateways.net/bzz:/${n}${l}${d||""}${h||""}`;else if("onion"===t||"onion3"===t)g=`http://${n}.onion${l}${d||""}${h||""}`;else if("zeronet"===t)g=`http://127.0.0.1:43110/${n}${l}${d||""}${h||""}`;else if("skynet-ns"===t){const e=n.padEnd(n.length+4-n.length%4,"="),t=i.default.toByteArray(e),s={padding:!1};g=`https://${(0,r.default)(t,"RFC4648-HEX",s).toLowerCase()}.siasky.net${l}${d||""}${h||""}`}}catch(e){console.warn(e)}finally{g&&(f||!f&&g!==m)&&s.default.tabs.update(t,{url:g})}}({tabId:d,name:p,pathname:f,search:m,fragment:g})}};var r=c(e("base32-encode")),i=c(e("base64-js")),s=c(e("webextension-polyfill")),a=c(e("../../../../shared/modules/fetch-with-timeout")),o=c(e("./resolver"));function c(e){return e&&e.__esModule?e:{default:e}}const u=(0,a.default)(),l=["eth"]}}},{package:"$root$",file:"app/scripts/lib/ens-ipfs/setup.js"}],[530,{"@ethereumjs/tx":395,"@ethereumjs/util":407,"@keystonehq/bc-ur-registry-eth":534,buffer:2666,hdkey:3277,rlp:3922,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(n,"__esModule",{value:!0});var i,s,a=r(e("hdkey")),o=e("@ethereumjs/util"),c=r(e("rlp")),u=e("@ethereumjs/tx"),l=e("@keystonehq/bc-ur-registry-eth"),d=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(i||(i={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(s||(s={}));class h{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,n,r)=>{const i=await this.getInteraction().requestSignature(t,n,r),s=i.getRequestId(),a=i.getSignature();if(s&&d.stringify(s)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:a.slice(0,32),s:a.slice(32,64),v:a.slice(64)}},this.__readCryptoHDKey=e=>{var t,n;const r="m/"+e.getOrigin().getPath(),i=null==(t=e.getOrigin().getSourceFingerprint())?void 0:t.toString("hex"),a=(null==(n=e.getChildren())?void 0:n.getPath())||"0/*",o=e.getName();if(e.getNote()===s.standard?this.keyringAccount=s.standard:e.getNote()===s.ledger_legacy&&(this.keyringAccount=s.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const c=e.getBip32Key();this.xfp=i,this.xpub=c,this.hdPath=r,this.childrenPath=a,void 0!==o&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,n;const r=null==(t=e.getMasterFingerprint())?void 0:t.toString("hex");if(!r)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=r,this.initialized=!0;let i=!1;const a=e.getOutputDescriptors();if(!a||0===a.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(a.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null==(n=e.getOutputDescriptors())||n.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),n="M/"+t.getOrigin().getPath(),r="0x"+o.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===s.ledger_live&&(this.keyringAccount=s.ledger_live),void 0===this.paths[o.toChecksumAddress(r)]&&(i=!0),this.paths[o.toChecksumAddress(r)]=n}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,n=t+this.perPage,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex("m",e);r.push({address:t,balance:null,index:e}),this.indexes[o.toChecksumAddress(t)]=e}return r},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,n=t+this.perPage,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex("m",e);r.push({address:t,balance:null,index:e})}return this.page+=e,r},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===i.hd){this.checkKeyring(),this.hdk||(this.hdk=a.fromExtendedKey(this.xpub));const n=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),r=this.hdk.derive(`${e}/${n}`),i="0x"+o.publicToAddress(r.publicKey,!0).toString("hex");return o.toChecksumAddress(i)}{const e=Object.keys(this.paths)[t];if(e)return o.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=i.hd,this.keyringAccount=s.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===l.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=i.hd,this.__readCryptoHDKey(e)):(this.keyringMode=i.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||i.hd,this.keyringAccount=e.keyringAccount||s.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,n=t+e,r=[];for(let e=t;e<n;e++){const t=await this.__addressFromIndex("m",e);r.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(r),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===i.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,n){const r=0===n.type?l.DataType.transaction:l.DataType.typedTransaction;let i;i=0===n.type?t.from(c.encode(n.getMessageToSign(!1))):n.getMessageToSign(!1);const s=await this._pathFromAddress(e),a=Number(n.common.chainId()),o=d.v4(),h=l.EthSignRequest.constructETHRequest(i,r,s,this.xfp,o,a),{r:p,s:f,v:m}=await this.requestSignature(o,h,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return u.TransactionFactory.fromTxData({...n.toJSON(),type:n.type,r:p,s:f,v:m},{common:n.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,n){const r=o.stripHexPrefix(n),i=await this._pathFromAddress(e),s=d.v4(),a=l.EthSignRequest.constructETHRequest(t.from(r,"hex"),l.DataType.personalMessage,i,this.xfp,s,void 0,e),{r:c,s:u,v:h}=await this.requestSignature(s,a,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([c,u,h]).toString("hex")}async signTypedData(e,n){const r=await this._pathFromAddress(e),i=d.v4(),s=l.EthSignRequest.constructETHRequest(t.from(JSON.stringify(n),"utf-8"),l.DataType.typedData,r,this.xfp,i,void 0,e),{r:a,s:o,v:c}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([a,o,c]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===i.hd){const t=o.toChecksumAddress(e);let n=this.indexes[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",n.toString()).replace(/\*/g,"0")}`}{const t=o.toChecksumAddress(e),n=this.paths[t];if(void 0===n)throw new Error("Unknown address");return n}}}h.type="QR Hardware Wallet Device",n.BaseKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[531,{"./base-eth-keyring.cjs.development.js":529,"./base-eth-keyring.cjs.production.min.js":530},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[56,{lodash:3509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i((0,r.cloneDeep)(e),(e=>null===e?"null":typeof e))};var r=e("lodash");function i(e={},t){return Object.entries(e).forEach((([n,r])=>{e[n]="object"==typeof r&&null!==r?i(r,t):t(r)})),e}}}},{package:"$root$",file:"app/scripts/lib/getObjStructure.js"}],[561,{"./metamask-airgapped-keyring.cjs.development.js":562,"./metamask-airgapped-keyring.cjs.production.min.js":563},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./metamask-airgapped-keyring.cjs.production.min.js")}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/index.js"}],[562,{"@ethereumjs/tx":395,"@keystonehq/base-eth-keyring":531,"@keystonehq/bc-ur-registry-eth":534,"@metamask/obs-store":568,buffer:2666,events:2968,rlp:571,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/base-eth-keyring"),s=e("events"),a=e("@metamask/obs-store"),o=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),u=e("@ethereumjs/tx"),l=(r=e("rlp"))&&"object"==typeof r&&"default"in r?r.default:r;class d extends s.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(`${e}-signed`),this.removeAllListeners(`${e}-canceled`)},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,n)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(n=>{const r=o.CryptoHDKey.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_success-account",(n=>{const r=o.CryptoAccount.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),n(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,n,r)=>new Promise(((i,s)=>{const a=e.toUR(),u=e.getRequestId(),l=c.stringify(u),d={requestId:l,payload:{type:a.type,cbor:a.cbor.toString("hex")},title:n,description:r};this.memStore.updateState({sign:{request:d}}),this.once(`${l}-signed`,(e=>{const n=o.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),i(n)})),this.once(`${l}-canceled`,(()=>{this.resetState(),s(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(`${e}-signed`,t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(`${t}-canceled`)}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},d.instance)return d.instance;this.memStore=new a.ObservableStore({sync:{reading:!1},sign:{},_version:1}),d.instance=this}}class h extends i.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new d,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=undefined,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const n=0===t.type?o.DataType.transaction:o.DataType.typedTransaction;let r;r=0===t.type?l.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const i=await this._pathFromAddress(e),s=t.common.chainId(),a=c.v4(),d=o.EthSignRequest.constructETHRequest(r,n,i,this.xfp,a,s,e),{r:h,s:p,v:f}=await this.requestSignature(a,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),m=t.toJSON();m.v=f,m.s=p,m.r=h,m.type=t.type;return u.TransactionFactory.fromTxData(m,{common:t.common})}}h.type=i.BaseKeyring.type,n.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.development.js"}],[563,{"@ethereumjs/tx":395,"@keystonehq/base-eth-keyring":531,"@keystonehq/bc-ur-registry-eth":534,"@metamask/obs-store":568,buffer:2666,events:2968,rlp:571,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("@keystonehq/base-eth-keyring"),s=e("events"),a=e("@metamask/obs-store"),o=e("@keystonehq/bc-ur-registry-eth"),c=e("uuid"),u=e("@ethereumjs/tx"),l=(r=e("rlp"))&&"object"==typeof r&&"default"in r?r.default:r;class d extends s.EventEmitter{constructor(){if(super(),this.cleanSyncListeners=()=>{this.removeAllListeners("keystone-sync_success-hdkey"),this.removeAllListeners("keystone-sync_success-account"),this.removeAllListeners("keystone-sync_cancel")},this.cleanSignListeners=e=>{this.removeAllListeners(e+"-signed"),this.removeAllListeners(e+"-canceled")},this.readCryptoHDKeyOrCryptoAccount=()=>new Promise(((e,n)=>{this.memStore.updateState({sync:{reading:!0}}),this.on("keystone-sync_success-hdkey",(n=>{const r=o.CryptoHDKey.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_success-account",(n=>{const r=o.CryptoAccount.fromCBOR(t.from(n,"hex"));this.resetState(),e(r)})),this.on("keystone-sync_cancel",(()=>{this.resetState(),n(new Error("KeystoneError#sync_cancel. Sync process canceled, please retry"))}))})),this.submitCryptoHDKey=e=>{this.emit("keystone-sync_success-hdkey",e)},this.submitCryptoAccount=e=>{this.emit("keystone-sync_success-account",e)},this.cancelSync=()=>{this.emit("keystone-sync_cancel")},this.requestSignature=(e,n,r)=>new Promise(((i,s)=>{const a=e.toUR(),u=e.getRequestId(),l=c.stringify(u),d={requestId:l,payload:{type:a.type,cbor:a.cbor.toString("hex")},title:n,description:r};this.memStore.updateState({sign:{request:d}}),this.once(l+"-signed",(e=>{const n=o.ETHSignature.fromCBOR(t.from(e,"hex"));this.resetState(),i(n)})),this.once(l+"-canceled",(()=>{this.resetState(),s(new Error("KeystoneError#Tx_canceled. Signing canceled, please retry"))}))})),this.submitSignature=(e,t)=>{this.emit(e+"-signed",t)},this.cancelRequestSignature=()=>{const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.memStore.updateState({sign:{}}),this.emit(t+"-canceled")}},this.reset=()=>{this.cleanSyncListeners();const e=this.memStore.getState().sign.request;if(e){const{requestId:t}=e;this.cleanSignListeners(t)}this.resetState()},this.resetState=()=>{this.memStore.updateState({sync:{reading:!1},sign:{}})},d.instance)return d.instance;this.memStore=new a.ObservableStore({sync:{reading:!1},sign:{},_version:1}),d.instance=this}}class h extends i.BaseKeyring{constructor(e){if(super(e),this.getInteraction=()=>new d,this.resetStore=()=>{this.getInteraction().reset()},this.getMemStore=()=>this.getInteraction().memStore,this.removeAccount=e=>{if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))},this.forgetDevice=()=>{this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.name="QR Hardware",this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.indexes={},this.hdk=void 0,this.paths={}},this.submitCryptoHDKey=this.getInteraction().submitCryptoHDKey,this.submitCryptoAccount=this.getInteraction().submitCryptoAccount,this.submitSignature=this.getInteraction().submitSignature,this.cancelSync=this.getInteraction().cancelSync,this.cancelSignRequest=this.getInteraction().cancelRequestSignature,h.instance)return h.instance.deserialize(e),h.instance;h.instance=this}async signTransaction(e,t){const n=0===t.type?o.DataType.transaction:o.DataType.typedTransaction;let r;r=0===t.type?l.encode(t.getMessageToSign(!1)):t.getMessageToSign(!1);const i=await this._pathFromAddress(e),s=t.common.chainId(),a=c.v4(),d=o.EthSignRequest.constructETHRequest(r,n,i,this.xfp,a,s,e),{r:h,s:p,v:f}=await this.requestSignature(a,d,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature'),m=t.toJSON();return m.v=f,m.s=p,m.r=h,m.type=t.type,u.TransactionFactory.fromTxData(m,{common:t.common})}}h.type=i.BaseKeyring.type,n.MetaMaskKeyring=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring",file:"node_modules/@keystonehq/metamask-airgapped-keyring/dist/metamask-airgapped-keyring.cjs.production.min.js"}],[564,{"./ObservableStore":566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ComposedStore=void 0;const r=e("./ObservableStore");class i extends r.ObservableStore{constructor(e){super({}),this._children=e||{},Object.keys(this._children).forEach((e=>{const t=this._children[e];this._addChild(e,t)}))}_addChild(e,t){const n=t=>{const n=this.getState();n[e]=t,this.putState(n)};t.subscribe(n),n(t.getState())}}n.ComposedStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ComposedStore.js"}],[565,{"./ObservableStore":566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MergedStore=void 0;const r=e("./ObservableStore");class i extends r.ObservableStore{constructor(e=[]){super({}),this._children=e,e.forEach((e=>this._addChild(e))),this._updateWholeState()}_addChild(e){e.subscribe((()=>this._updateWholeState()))}_updateWholeState(){const e=this._children.map((e=>e.getState())),t=Object.assign({},...e);this.putState(t)}}n.MergedStore=i}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/MergedStore.js"}],[566,{"@metamask/safe-event-emitter":570},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.ObservableStore=void 0;const i=r(e("@metamask/safe-event-emitter"));class s extends i.default{constructor(e){super(),this._state=e||{}}getState(){return this._getState()}putState(e){this._putState(e),this.emit("update",e)}updateState(e){if(e&&"object"==typeof e){const t=this.getState();this.putState(Object.assign(Object.assign({},t),e))}else this.putState(e)}subscribe(e){this.on("update",e)}unsubscribe(e){this.removeListener("update",e)}_getState(){return this._state}_putState(e){this._state=e}}n.ObservableStore=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/ObservableStore.js"}],[567,{stream:3995},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.storeAsStream=void 0;const r=e("stream");class i extends r.Duplex{constructor(e){super({objectMode:!0}),this.resume(),this.handler=e=>this.push(e),this.obsStore=e,this.obsStore.subscribe(this.handler)}pipe(e,t){const n=super.pipe(e,t);return e.write(this.obsStore.getState()),n}_write(e,t,n){this.obsStore.putState(e),n()}_read(e){return undefined}_destroy(e,t){this.obsStore.unsubscribe(this.handler),super._destroy(e,t)}}n.storeAsStream=function(e){return new i(e)}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/asStream.js"}],[568,{"./ComposedStore":564,"./MergedStore":565,"./ObservableStore":566,"./asStream":567,"./transform":569},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),i(e("./asStream"),n),i(e("./ComposedStore"),n),i(e("./MergedStore"),n),i(e("./ObservableStore"),n),i(e("./transform"),n)}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/index.js"}],[569,{through2:572},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.storeTransformStream=void 0;const r=e("through2");n.storeTransformStream=function(e){return r.obj(((t,n,r)=>{try{return r(null,e(t)),undefined}catch(e){return r(e),undefined}}))}}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/obs-store/dist/transform.js"}],[57,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hardwareKeyringBuilderFactory=function(e,t){const n=()=>new e({bridge:new t});return n.type=e.type,n}}}},{package:"$root$",file:"app/scripts/lib/hardware-keyring-builder-factory.ts"}],[570,{events:2968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("events");function i(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class s extends r.EventEmitter{emit(e,...t){let n="error"===e;const r=this._events;if(r!==undefined)n=n&&r.error===undefined;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const s=r[e];if(s===undefined)return!1;if("function"==typeof s)i(s,this,t);else{const e=s.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(s);for(let r=0;r<e;r+=1)i(n[r],this,t)}return!0}}n.default=s}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>@metamask/safe-event-emitter",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/@metamask/safe-event-emitter/index.js"}],[571,{"bn.js":2618,buffer:2666},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getLength=n.decode=n.encode=void 0;var i=r(e("bn.js"));function s(e,t){if("0"===e[0]&&"0"===e[1])throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function a(e,n){if(e<56)return t.from([e+n]);var r=u(e),i=u(n+55+r.length/2);return t.from(i+r,"hex")}function o(e){var n,r,i,a,c,u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(n=l-127,i=128===l?t.from([]):e.slice(1,n),2===n&&i[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:i,remainder:e.slice(n)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if((n=s(e.slice(1,r).toString("hex"),16))<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if((i=e.slice(r,n+r)).length<n)throw new Error("invalid RLP: not enough bytes for string");return{data:i,remainder:e.slice(n+r)}}if(l<=247){for(n=l-191,a=e.slice(1,n);a.length;)c=o(a),u.push(c.data),a=c.remainder;return{data:u,remainder:e.slice(n)}}var d=(r=l-246)+(n=s(e.slice(1,r).toString("hex"),16));if(d>e.length)throw new Error("invalid rlp: total length is larger than the data");if(0===(a=e.slice(r,d)).length)throw new Error("invalid rlp, List has a invalid length");for(;a.length;)c=o(a),u.push(c.data),a=c.remainder;return{data:u,remainder:e.slice(d)}}function c(e){return"0x"===e.slice(0,2)}function u(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function l(e){if(!t.isBuffer(e)){if("string"==typeof e)return c(e)?t.from((r="string"!=typeof(s=e)?s:c(s)?s.slice(2):s).length%2?"0"+r:r,"hex"):t.from(e);if("number"==typeof e||"bigint"==typeof e)return e?(n=u(e),t.from(n,"hex")):t.from([]);if(null===e||e===undefined)return t.from([]);if(e instanceof Uint8Array)return t.from(e);if(i.default.isBN(e))return t.from(e.toArray());throw new Error("invalid type")}var n,r,s;return e}n.encode=function e(n){if(Array.isArray(n)){for(var r=[],i=0;i<n.length;i++)r.push(e(n[i]));var s=t.concat(r);return t.concat([a(s.length,192),s])}var o=l(n);return 1===o.length&&o[0]<128?o:t.concat([a(o.length,128),o])},n.decode=function(e,n){if(void 0===n&&(n=!1),!e||0===e.length)return t.from([]);var r=o(l(e));if(n)return r;if(0!==r.remainder.length)throw new Error("invalid remainder");return r.data},n.getLength=function(e){if(!e||0===e.length)return t.from([]);var n=l(e),r=n[0];if(r<=127)return n.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var i=r-246;return i+s(n.slice(1,i).toString("hex"),16)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/metamask-airgapped-keyring>rlp",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/rlp/dist.browser/index.js"}],[572,{_process:3660,"readable-stream":3890,util:4098,xtend:4168},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("readable-stream").Transform,i=e("util").inherits,s=e("xtend");function a(e){r.call(this,e),this._destroyed=!1}function o(e,t,n){n(null,e)}function c(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=o),"function"!=typeof r&&(r=null),e(t,n,r)}}i(a,r),a.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick((function(){e&&t.emit("error",e),t.emit("close")}))}},t.exports=c((function(e,t,n){var r=new a(e);return r._transform=t,n&&(r._flush=n),r})),t.exports.ctor=c((function(e,t,n){function r(t){if(!(this instanceof r))return new r(t);this.options=s(e,t),a.call(this,this.options)}return i(r,a),r.prototype._transform=t,n&&(r.prototype._flush=n),r})),t.exports.obj=c((function(e,t,n){var r=new a(s({objectMode:!0,highWaterMark:16},e));return r._transform=t,n&&(r._flush=n),r}))}).call(this)}).call(this,e("_process"))}}},{package:"@keystonehq/metamask-airgapped-keyring>@metamask/obs-store>through2",file:"node_modules/@keystonehq/metamask-airgapped-keyring/node_modules/through2/through2.js"}],[58,{"@metamask/keyring-api":1344,"@metamask/permission-controller":1510},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isProtocolAllowed=c,n.keyringSnapPermissionsBuilder=function(e,t){return()=>{if("metamask"===t)return s;const n=e.getSubjectMetadata(t);return(null==n?void 0:n.subjectType)===r.SubjectType.Website&&c(t)?a:[]}};var r=e("@metamask/permission-controller"),i=e("@metamask/keyring-api");const s=[i.KeyringRpcMethod.ListAccounts,i.KeyringRpcMethod.GetAccount,i.KeyringRpcMethod.FilterAccountChains,i.KeyringRpcMethod.DeleteAccount,i.KeyringRpcMethod.ListRequests,i.KeyringRpcMethod.GetRequest,i.KeyringRpcMethod.SubmitRequest,i.KeyringRpcMethod.RejectRequest],a=[i.KeyringRpcMethod.ListAccounts,i.KeyringRpcMethod.GetAccount,i.KeyringRpcMethod.CreateAccount,i.KeyringRpcMethod.FilterAccountChains,i.KeyringRpcMethod.UpdateAccount,i.KeyringRpcMethod.DeleteAccount,i.KeyringRpcMethod.ExportAccount,i.KeyringRpcMethod.ListRequests,i.KeyringRpcMethod.GetRequest,i.KeyringRpcMethod.ApproveRequest,i.KeyringRpcMethod.RejectRequest,i.KeyringRpcMethod.SubmitRequest],o=["https:"];function c(e){try{const t=new URL(e);return o.includes(t.protocol)}catch(e){return!1}}}}},{package:"$root$",file:"app/scripts/lib/keyring-snaps-permissions.ts"}],[6,{"@metamask/base-controller":1085},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderController=void 0;var r=e("@metamask/base-controller");const i={pinnedAccountList:[],hiddenAccountList:[]},s={pinnedAccountList:{persist:!0,anonymous:!0},hiddenAccountList:{persist:!0,anonymous:!0}};class a extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:s,name:"AccountOrderController",state:{...i,...t}})}updateAccountsList(e){this.update((t=>(t.pinnedAccountList=e,t)))}updateHiddenAccountsList(e){this.update((t=>(t.hiddenAccountList=e,t)))}}n.AccountOrderController=a}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[61,{"../util":97,"json-rpc-engine":3328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createPendingNonceMiddleware=function({getPendingNonce:e}){return(0,r.createAsyncMiddleware)((async(t,n,r)=>{const{method:i,params:s}=t;if("eth_getTransactionCount"!==i)return void r();const[a,o]=s;"pending"===o?n.result=await e(a,t.networkClientId):r()}))},n.createPendingTxMiddleware=function({getPendingTransactionByHash:e}){return(0,r.createAsyncMiddleware)((async(t,n,r)=>{const{method:s,params:a}=t;if("eth_getTransactionByHash"!==s)return void r();const[o]=a,c=e(o);c?n.result=(0,i.formatTxMetaForRpcResult)(c):r()}))};var r=e("json-rpc-engine"),i=e("../util")}}},{package:"$root$",file:"app/scripts/lib/middleware/pending.js"}],[62,{events:2968,loglevel:3515},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=s(e("events")),i=s(e("loglevel"));function s(e){return e&&e.__esModule?e:{default:e}}class a extends r.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const n=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||n&&n.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const n of t)try{i.default.info(`Running migration ${n.version}...`);const t=await n.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==n.version)throw new Error("Migrator - Migration did not update version number correctly");e=t,i.default.info(`Migration ${n.version} complete`)}catch(t){const r=t.message;return t.message=`MetaMask Migration Error #${n.version}: ${r}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}n.default=a}}},{package:"$root$",file:"app/scripts/lib/migrator/index.js"}],[64,{"../../../shared/constants/notifications":4191,"../platforms/extension":223,"@metamask/safe-event-emitter":1613},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.NOTIFICATION_MANAGER_EVENTS=void 0;var r=a(e("@metamask/safe-event-emitter")),i=a(e("../platforms/extension")),s=e("../../../shared/constants/notifications");function a(e){return e&&e.__esModule?e:{default:e}}const o=n.NOTIFICATION_MANAGER_EVENTS={POPUP_CLOSED:"onPopupClosed"};class c extends r.default{constructor(){super(),this.platform=new i.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(e,t){this._popupId=t,this._setCurrentPopupId=e;const n=await this._getPopup(t);if(n)await this.platform.focusWindow(n.id);else{let e=0,t=0;try{const n=await this.platform.getLastFocusedWindow();t=n.top,e=Math.max(n.left+(n.width-s.NOTIFICATION_WIDTH),0)}catch(n){const{screenX:r,screenY:i,outerWidth:a}=window;t=Math.max(i,0),e=Math.max(r+(a-s.NOTIFICATION_WIDTH),0)}const n=await this.platform.openWindow({url:"notification.html",type:"popup",width:s.NOTIFICATION_WIDTH,height:s.NOTIFICATION_HEIGHT,left:e,top:t});n.left!==e&&"fullscreen"!==n.state&&await this.platform.updateWindowPosition(n.id,e,t),this._setCurrentPopupId(n.id),this._popupId=n.id}}_onWindowClosed(e){e===this._popupId&&(this._setCurrentPopupId(undefined),this._popupId=undefined,this.emit(o.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}n.default=c}}},{package:"$root$",file:"app/scripts/lib/notification-manager.js"}],[65,{"../../../../shared/constants/offscreen-communication":4192,"eth-lattice-keyring":2866},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LatticeKeyringOffscreen=void 0;var r,i=(r=e("eth-lattice-keyring"))&&r.__esModule?r:{default:r},s=e("../../../../shared/constants/offscreen-communication");class a extends i.default{constructor(e={}){super(e)}async _getCreds(){try{const e=this.appName?this.appName:"Unknown",t=`${s.KnownOrigins.lattice}?keyring=${e}&forceLogin=true`;return await new Promise(((e,n)=>{chrome.runtime.sendMessage({target:s.OffscreenCommunicationTarget.latticeOffscreen,params:{url:t}},(t=>{t.error&&n(t.error),e(t.result)}))}))}catch(e){throw new Error(e)}}}n.LatticeKeyringOffscreen=a,function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(a,"type",void 0),a.type=i.default.type}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/lattice-offscreen-keyring.ts"}],[66,{"../../../../shared/constants/offscreen-communication":4192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerOffscreenBridge=void 0;var r=e("../../../../shared/constants/offscreen-communication");function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.LedgerOffscreenBridge=class{constructor(){i(this,"isDeviceConnected",!1)}init(){return chrome.runtime.onMessage.addListener((e=>{e.target===r.OffscreenCommunicationTarget.extension&&e.event===r.OffscreenCommunicationEvents.ledgerDeviceConnect&&(this.isDeviceConnected=!0)})),Promise.resolve()}destroy(){return Promise.resolve()}attemptMakeApp(){return new Promise(((e,t)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.makeApp},(n=>{n.success?e(!0):n.error?t(n.error):t(new Error("Unknown error occurred"))}))}))}updateTransportMethod(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.updateTransport,params:{transportType:e}},(e=>{e.success?t(!0):n(new Error("Ledger transport could not be updated"))}))}))}getPublicKey(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.getPublicKey,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}deviceSignTransaction(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.signTransaction,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}deviceSignMessage(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.signMessage,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}deviceSignTypedData(e){return new Promise(((t,n)=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.ledgerOffscreen,action:r.LedgerAction.signTypedData,params:e},(e=>{e.success?t(e.payload):n(e.payload.error)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/ledger-offscreen-bridge.ts"}],[67,{"../../../../shared/constants/offscreen-communication":4192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorOffscreenBridge=void 0;var r=e("../../../../shared/constants/offscreen-communication");function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.TrezorOffscreenBridge=class{constructor(){i(this,"model",void 0)}init(e){return chrome.runtime.onMessage.addListener((e=>{e.target===r.OffscreenCommunicationTarget.extension&&e.event===r.OffscreenCommunicationEvents.trezorDeviceConnect&&(this.model=e.payload)})),new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.init,params:e},(()=>{t()}))}))}dispose(){return new Promise((e=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.dispose},(()=>{e()}))}))}getPublicKey(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.getPublicKey,params:e},(e=>{t(e)}))}))}ethereumSignTransaction(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signTransaction,params:e},(e=>{t(e)}))}))}ethereumSignMessage(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signMessage,params:e},(e=>{t(e)}))}))}ethereumSignTypedData(e){return new Promise((t=>{chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.trezorOffscreen,action:r.TrezorAction.signTypedData,params:e},(e=>{t(e)}))}))}}}}},{package:"$root$",file:"app/scripts/lib/offscreen-bridge/trezor-offscreen-bridge.ts"}],[68,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.IndexedDBPPOMStorage=void 0;const s=async(e,t,n)=>{const r=await crypto.subtle.digest("SHA-256",t);if(Array.from(new Uint8Array(r)).map((e=>e.toString(16).padStart(2,"0"))).join("")!==n)throw new Error(`Checksum mismatch for key ${e}`)};var a=new WeakSet;function o(e){return new Promise(((t,n)=>{const r=indexedDB.open(this.storeName,this.dbVersion);r.onerror=e=>{var t;n(new Error(`Failed to open database ${this.storeName}: ${null===(t=e.target)||void 0===t?void 0:t.error}`))},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:["name","chainId"]})},r.onsuccess=n=>{const r=n.target.result.transaction([this.storeName],e).objectStore(this.storeName);t(r)}}))}n.IndexedDBPPOMStorage=class{constructor(e,t){r(this,a),i(this,"storeName",void 0),i(this,"dbVersion",void 0),this.storeName=e,this.dbVersion=t}async objectStoreAction(e,t,n="readonly"){return new Promise(((r,i)=>{(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n})(this,a,o).call(this,n).then((n=>{const s=n[e](t);s.onsuccess=async e=>{r(e)},s.onerror=t=>{var n;i(new Error(`Error in indexDB operation ${e}: ${null===(n=t.target)||void 0===n?void 0:n.error}`))}})).catch((e=>{i(e)}))}))}async read(e,t){var n;const r=null===(n=(await this.objectStoreAction("get",[e.name,e.chainId])).target)||void 0===n||null===(n=n.result)||void 0===n?void 0:n.data;return await s(e,r,t),r}async write(e,t,n){await s(e,t,n),await this.objectStoreAction("put",{...e,data:t},"readwrite")}async delete(e){await this.objectStoreAction("delete",[e.name,e.chainId],"readwrite")}async dir(){var e;return null===(e=(await this.objectStoreAction("getAllKeys")).target)||void 0===e?void 0:e.result.map((([e,t])=>({name:e,chainId:t})))}}}}},{package:"$root$",file:"app/scripts/lib/ppom/indexed-db-backend.ts"}],[7,{"../../../shared/constants/alerts":4177,"@metamask/obs-store":1494},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/obs-store"),i=e("../../../shared/constants/alerts");const s={alertEnabledness:i.TOGGLEABLE_ALERT_TYPES.reduce(((e,t)=>(e[t]=!0,e)),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}};n.default=class{constructor(e={}){const{initState:t={},controllerMessenger:n}=e,i={...s,alertEnabledness:{...s.alertEnabledness,...t.alertEnabledness}};this.store=new r.ObservableStore(i),this.controllerMessenger=n,this.selectedAddress=this.controllerMessenger.call("AccountsController:getSelectedAccount"),this.controllerMessenger.subscribe("AccountsController:selectedAccountChange",(e=>{this.store.getState().unconnectedAccountAlertShownOrigins&&this.selectedAddress!==e.address&&(this.selectedAddress=e.address,this.store.updateState({unconnectedAccountAlertShownOrigins:{}}))}))}setAlertEnabledness(e,t){let{alertEnabledness:n}=this.store.getState();n={...n},n[e]=t,this.store.updateState({alertEnabledness:n})}setUnconnectedAccountAlertShown(e){let{unconnectedAccountAlertShownOrigins:t}=this.store.getState();t={...t},t[e]=!0,this.store.updateState({unconnectedAccountAlertShownOrigins:t})}getWeb3ShimUsageState(e){return this.store.getState().web3ShimUsageOrigins[e]}setWeb3ShimUsageRecorded(e){this._setWeb3ShimUsageState(e,i.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){this._setWeb3ShimUsageState(e,i.Web3ShimUsageAlertStates.dismissed)}_setWeb3ShimUsageState(e,t){let{web3ShimUsageOrigins:n}=this.store.getState();n={...n},n[e]=t,this.store.updateState({web3ShimUsageOrigins:n})}}}}},{package:"$root$",file:"app/scripts/controllers/alert.js"}],[71,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PPOM=void 0,n.initSync=function(e){if(r!==undefined)return r;const t=M();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const n=new WebAssembly.Instance(e,t);return A(n,e)},n.main=function(){r.main()};const i="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&i.decode();let s=null;function a(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s}function o(e,t){return e>>>=0,i.decode(a().subarray(e,e+t))}const c=new Array(128).fill(undefined);c.push(undefined,null,!0,!1);let u=c.length;function l(e){u===c.length&&c.push(c.length+1);const t=u;return u=c[t],c[t]=e,t}function d(e){return c[e]}function h(e){const t=d(e);return function(e){e<132||(c[e]=u,u=e)}(e),t}let p=0;const f="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},m="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(n===undefined){const n=f.encode(e),r=t(n.length,1)>>>0;return a().subarray(r,r+n.length).set(n),p=n.length,r}let r=e.length,i=t(r,1)>>>0;const s=a();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;s[i+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),i=n(i,r,r=o+3*e.length,1)>>>0;const t=a().subarray(i+o,i+r);o+=m(e,t).written}return p=o,i}let y=null;function _(){return null!==y&&0!==y.byteLength||(y=new Int32Array(r.memory.buffer)),y}function b(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=b(e[0]));for(let r=1;r<t;r++)n+=", "+b(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function w(e,t,n){r.wasm_bindgen__convert__closures__invoke1_mut(e,t,l(n))}function v(e,t){r._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__destroy(e,t)}let S=null;function E(e,t){const n=t(4*e.length,4)>>>0,i=(null!==S&&0!==S.byteLength||(S=new Uint32Array(r.memory.buffer)),S);for(let t=0;t<e.length;t++)i[n/4+t]=l(e[t]);return p=e.length,n}function T(e,t){try{return e.apply(this,t)}catch(e){r.__wbindgen_exn_store(l(e))}}class k{static __wrap(e){e>>>=0;const t=Object.create(k.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_ppom_free(e)}static new(e,t){const n=E(t,r.__wbindgen_malloc),i=p;return h(r.ppom_new(l(e),n,i))}validateJsonRpc(e){return h(r.ppom_validateJsonRpc(this.__wbg_ptr,l(e)))}static version(){return h(r.ppom_version())}}function M(){const e={wbg:{}};return e.wbg.__wbg_buffer_085ec1f694018c4f=function(e){return l(d(e).buffer)},e.wbg.__wbg_call_01734de55d61e11d=function(){return T((function(e,t,n){return l(d(e).call(d(t),d(n)))}),arguments)},e.wbg.__wbg_call_4c92f6aec1e1d6e6=function(){return T((function(e,t,n,r){return l(d(e).call(d(t),d(n),d(r)))}),arguments)},e.wbg.__wbg_from_d7c216d4616bb368=function(e){return l(Array.from(d(e)))},e.wbg.__wbg_get_44be0491f933a435=function(e,t){return l(d(e)[t>>>0])},e.wbg.__wbg_length_72e2208bbc0efc61=function(e){return d(e).length},e.wbg.__wbg_length_d813e535247d427e=function(e){return d(e).length},e.wbg.__wbg_length_fff51ee6522a1a18=function(e){return d(e).length},e.wbg.__wbg_new_43f1b47c28813cbd=function(e,t){try{var n={a:e,b:t};const i=new Promise(((e,t)=>{const i=n.a;n.a=0;try{return function(e,t,n,i){r.wasm_bindgen__convert__closures__invoke2_mut(e,t,l(n),l(i))}(i,n.b,e,t)}finally{n.a=i}}));return l(i)}finally{n.a=n.b=0}},e.wbg.__wbg_new_8125e318e6245eed=function(e){return l(new Uint8Array(d(e)))},e.wbg.__wbg_parse_670c19d4e984792e=function(){return T((function(e,t){return l(JSON.parse(o(e,t)))}),arguments)},e.wbg.__wbg_ppom_new=function(e){return l(k.__wrap(e))},e.wbg.__wbg_resolve_53698b95aaf7fcf8=function(e){return l(Promise.resolve(d(e)))},e.wbg.__wbg_set_5cf90238115182c3=function(e,t,n){d(e).set(d(t),n>>>0)},e.wbg.__wbg_stringify_e25465938f3f611f=function(){return T((function(e){return l(JSON.stringify(d(e)))}),arguments)},e.wbg.__wbg_then_b2267541e2a73865=function(e,t,n){return l(d(e).then(d(t),d(n)))},e.wbg.__wbg_then_f7e06ee3c11698eb=function(e,t){return l(d(e).then(d(t)))},e.wbg.__wbindgen_cb_drop=function(e){const t=h(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper_wasm_bindgen__closure__Closure_T___wrap__breaks_if_inlined=function(e,t,n){const r=function(e,t,n,r){const i={a:e,b:t,cnt:1},s=(...e)=>{i.cnt++;const t=i.a;i.a=0;try{return r(t,i.b,...e)}finally{0==--i.cnt?n(t,i.b):i.a=t}};return s.original=i,s}(e,t,v,w);return l(r)},e.wbg.__wbindgen_debug_string=function(e,t){const n=g(b(d(t)),r.__wbindgen_malloc,r.__wbindgen_realloc),i=p;_()[e/4+1]=i,_()[e/4+0]=n},e.wbg.__wbindgen_error_new=function(e,t){return l(new Error(o(e,t)))},e.wbg.__wbindgen_is_undefined=function(e){return d(e)===undefined},e.wbg.__wbindgen_memory=function(){return l(r.memory)},e.wbg.__wbindgen_object_drop_ref=function(e){h(e)},e.wbg.__wbindgen_string_get=function(e,t){const n=d(t),i="string"==typeof n?n:undefined;var s,a=(s=i)===undefined||null===s?0:g(i,r.__wbindgen_malloc,r.__wbindgen_realloc),o=p;_()[e/4+1]=o,_()[e/4+0]=a},e.wbg.__wbindgen_string_new=function(e,t){return l(o(e,t))},e.wbg.__wbindgen_throw=function(e,t){throw new Error(o(e,t))},e}function A(e,t){return r=e.exports,P.__wbindgen_wasm_module=t,y=null,S=null,s=null,r.__wbindgen_start(),r}async function P(e){if(r!==undefined)return r;const t=M();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:i}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return A(n,i)}n.PPOM=k;n.default=P}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom.js"}],[72,{"../../../../shared/constants/network":4190,"./handlers":76,"@metamask/permission-controller":1510,"@metamask/snaps-rpc-methods":1887,"eth-rpc-errors":2897,lodash:3509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createMethodMiddleware=function(e){const t=d.filter((t=>!Object.hasOwnProperty.call(e,t)));if(t.length>0)throw new Error(`Missing expected hooks:\n\n${t.join("\n")}\n`);return async function(t,n,r,i){if(c.UNSUPPORTED_RPC_METHODS.has(t.method))return i(a.ethErrors.rpc.methodNotSupported());const o=l.get(t.method);if(o){const{implementation:a,hookNames:c}=o;try{return await a(t,n,r,i,(0,s.selectHooks)(e,c))}catch(e){return i(e)}}return r()}};var r,i=e("@metamask/permission-controller"),s=e("@metamask/snaps-rpc-methods"),a=e("eth-rpc-errors"),o=e("lodash"),c=e("../../../../shared/constants/network");const u=[...((r=e("./handlers"))&&r.__esModule?r:{default:r}).default,...i.permissionRpcMethods.handlers],l=u.reduce(((e,t)=>{for(const n of t.methodNames)e.set(n,t);return e}),new Map),d=Array.from(new Set((0,o.flatten)(u.map((({hookNames:e})=>Object.keys(e))))).values())}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/createMethodMiddleware.js"}],[73,{"../../../../../shared/constants/app":4178,"../../../../../shared/constants/metametrics":4188,"../../../../../shared/modules/network.utils":4229,"../../util":97,"@metamask/controller-utils":1094,"eth-rpc-errors":2897,lodash:3509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils"),i=e("eth-rpc-errors"),s=e("lodash"),a=e("../../../../../shared/constants/app"),o=e("../../../../../shared/constants/metametrics"),c=e("../../../../../shared/modules/network.utils"),u=e("../../util");const l={methodNames:[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN],implementation:async function(e,t,n,l,{upsertNetworkConfiguration:d,getCurrentChainId:h,getCurrentRpcUrl:p,findNetworkConfigurationBy:f,setNetworkClientIdForDomain:m,setActiveNetwork:g,requestUserApproval:y,startApprovalFlow:_,endApprovalFlow:b,getProviderConfig:w,hasPermissions:v}){var S;if(null===(S=e.params)||void 0===S||!S[0]||"object"!=typeof e.params[0])return l(i.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:E}=e,{chainId:T,chainName:k=null,blockExplorerUrls:M=null,nativeCurrency:A=null,rpcUrls:P}=e.params[0],x=Object.keys((0,s.omit)(e.params[0],["chainId","chainName","blockExplorerUrls","iconUrls","rpcUrls","nativeCurrency"]));if(x.length>0)return l(i.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${x}`}));function R(e){const t=(0,u.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname||"https:"===t.protocol)}const C=Array.isArray(P)?P.find((e=>R(e))):null,I=null!==M&&Array.isArray(M)?M.find((e=>R(e))):null;if(!C)return l(i.ethErrors.rpc.invalidParams({message:`Expected an array with at least one valid string HTTPS url 'rpcUrls', Received:\n${P}`}));if(null!==M&&!I)return l(i.ethErrors.rpc.invalidParams({message:`Expected null or array with at least one valid string HTTPS URL 'blockExplorerUrl'. Received: ${M}`}));const O="string"==typeof T&&T.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(O))return l(i.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${T}`}));if(!(0,c.isSafeChainId)(parseInt(O,16)))return l(i.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${O}": numerical value greater than max safe value. Received:\n${T}`}));const N=f({chainId:O});if(N&&N.rpcUrl===C){t.result=null;const e=h(),n=p();if(e===O&&n===C)return l();try{await y({origin:E,type:r.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:N,fromNetworkConfiguration:w()}}),await g(N.id),t.result=null}catch(e){if(e.code!==i.errorCodes.provider.userRejectedRequest)return l(e)}return l()}if("string"!=typeof k||!k)return l(i.ethErrors.rpc.invalidParams({message:`Expected non-empty string 'chainName'. Received:\n${k}`}));const j=k.length>100?k.substring(0,100):k;if(null!==A){if("object"!=typeof A||Array.isArray(A))return l(i.ethErrors.rpc.invalidParams({message:`Expected null or object 'nativeCurrency'. Received:\n${A}`}));if(18!==A.decimals)return l(i.ethErrors.rpc.invalidParams({message:`Expected the number 18 for 'nativeCurrency.decimals' when 'nativeCurrency' is provided. Received: ${A.decimals}`}));if(!A.symbol||"string"!=typeof A.symbol)return l(i.ethErrors.rpc.invalidParams({message:`Expected a string 'nativeCurrency.symbol'. Received: ${A.symbol}`}))}const L=(null==A?void 0:A.symbol)||a.UNKNOWN_TICKER_SYMBOL;if(L!==a.UNKNOWN_TICKER_SYMBOL&&("string"!=typeof L||L.length<2||L.length>6))return l(i.ethErrors.rpc.invalidParams({message:`Expected 2-6 character string 'nativeCurrency.symbol'. Received:\n${L}`}));if(N&&N.chainId===O&&N.ticker!==L)return l(i.ethErrors.rpc.invalidParams({message:`nativeCurrency.symbol does not match currency symbol for a network the user already has added with the same chainId. Received:\n${L}`}));let D;const{id:U}=await _();try{await y({origin:E,type:r.ApprovalType.AddEthereumChain,requestData:{chainId:O,rpcPrefs:{blockExplorerUrl:I},chainName:j,rpcUrl:C,ticker:L}}),D=await d({chainId:O,rpcPrefs:{blockExplorerUrl:I},nickname:j,rpcUrl:C,ticker:L},{source:o.MetaMetricsNetworkEventSource.Dapp,referrer:E}),t.result=null}catch(e){return b({id:U}),l(e)}try{await y({origin:E,type:r.ApprovalType.SwitchEthereumChain,requestData:{toNetworkConfiguration:{rpcUrl:C,chainId:O,nickname:j,ticker:L,networkConfigurationId:D},fromNetworkConfiguration:w()}}),v(e.origin)&&m(e.origin,D)}catch(e){return l(e.code===i.errorCodes.provider.userRejectedRequest?undefined:e)}finally{b({id:U})}try{await g(D)}catch(e){return l(e)}return l()},hookNames:{upsertNetworkConfiguration:!0,getCurrentChainId:!0,getCurrentRpcUrl:!0,findNetworkConfigurationBy:!0,setNetworkClientIdForDomain:!0,setActiveNetwork:!0,requestUserApproval:!0,startApprovalFlow:!0,endApprovalFlow:!0,getProviderConfig:!0,hasPermissions:!0}};n.default=l}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/add-ethereum-chain.js"}],[74,{"../../../../../shared/constants/app":4178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.ETH_ACCOUNTS],implementation:async function(e,t,n,r,{getAccounts:i}){return t.result=await i(),r()},hookNames:{getAccounts:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/eth-accounts.js"}],[75,{"../../../../../shared/constants/app":4178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.GET_PROVIDER_STATE],implementation:async function(e,t,n,r,{getProviderState:i}){return t.result={...await i(e.origin)},r()},hookNames:{getProviderState:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/get-provider-state.js"}],[76,{"./add-ethereum-chain":73,"./eth-accounts":74,"./get-provider-state":75,"./log-web3-shim-usage":77,"./request-accounts":78,"./send-metadata":79,"./switch-ethereum-chain":80,"./watch-asset":81},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=d(e("./add-ethereum-chain")),i=d(e("./eth-accounts")),s=d(e("./get-provider-state")),a=d(e("./log-web3-shim-usage")),o=d(e("./request-accounts")),c=d(e("./send-metadata")),u=d(e("./switch-ethereum-chain")),l=d(e("./watch-asset"));function d(e){return e&&e.__esModule?e:{default:e}}const h=[r.default,i.default,s.default,a.default,o.default,c.default,u.default,l.default];n.default=h}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/index.js"}],[77,{"../../../../../shared/constants/app":4178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const r={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.LOG_WEB3_SHIM_USAGE],implementation:function(e,t,n,r,{getWeb3ShimUsageState:i,setWeb3ShimUsageRecorded:s}){const{origin:a}=e;i(a)===undefined&&s(a);return t.result=!0,r()},hookNames:{getWeb3ShimUsageState:!0,setWeb3ShimUsageRecorded:!0}};n.default=r}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/log-web3-shim-usage.js"}],[78,{"../../../../../shared/constants/app":4178,"../../../../../shared/constants/metametrics":4188,"../../util":97,"eth-rpc-errors":2897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),i=e("../../../../../shared/constants/app"),s=e("../../../../../shared/constants/metametrics"),a=e("../../util");const o={methodNames:[i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS],implementation:async function(e,t,n,o,{origin:u,getAccounts:l,getUnlockPromise:d,hasPermission:h,requestAccountsPermission:p,sendMetrics:f,getPermissionsForOrigin:m,metamaskState:g}){if(c.has(u))return t.error=r.ethErrors.rpc.resourceUnavailable(`Already processing ${i.MESSAGE_TYPE.ETH_REQUEST_ACCOUNTS}. Please wait.`),o();if(h(i.MESSAGE_TYPE.ETH_ACCOUNTS)){try{c.add(u),await d(!0),t.result=await l(),o()}catch(e){o(e)}finally{c.delete(u)}return undefined}try{await p()}catch(e){return t.error=e,o()}const y=await l();if(y.length>0){t.result=y;const e=m(u).eth_accounts.caveats[0].value.length,n=!Object.keys(g.permissionHistory).includes(u);(0,a.shouldEmitDappViewedEvent)(g.metaMetricsId)&&f({event:s.MetaMetricsEventName.DappViewed,category:s.MetaMetricsEventCategory.InpageProvider,referrer:{url:u},properties:{is_first_visit:n,number_of_accounts:Object.keys(g.accounts).length,number_of_accounts_connected:e}})}else t.error=r.ethErrors.rpc.internal("Accounts unexpectedly unavailable. Please report this bug.");return o()},hookNames:{origin:!0,getAccounts:!0,getUnlockPromise:!0,hasPermission:!0,requestAccountsPermission:!0,sendMetrics:!0,getPermissionsForOrigin:!0,metamaskState:!0}};n.default=o;const c=new Set}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/request-accounts.js"}],[79,{"../../../../../shared/constants/app":4178,"eth-rpc-errors":2897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors");const i={methodNames:[e("../../../../../shared/constants/app").MESSAGE_TYPE.SEND_METADATA],implementation:function(e,t,n,i,{addSubjectMetadata:s,subjectType:a}){const{origin:o,params:c}=e;if(!c||"object"!=typeof c||Array.isArray(c))return i(r.ethErrors.rpc.invalidParams({data:c}));{const{icon:e=null,name:t=null,...n}=c;s({...n,iconUrl:e,name:t,subjectType:a,origin:o})}return t.result=!0,i()},hookNames:{addSubjectMetadata:!0,subjectType:!0}};n.default=i}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/send-metadata.js"}],[8,{"@metamask/obs-store":1494,events:2968},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e("events"))&&r.__esModule?r:{default:r},s=e("@metamask/obs-store");function a(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}const u={currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0};var l=new WeakSet,d=new WeakSet;class h extends i.default{constructor({currentAppVersion:e="",currentMigrationVersion:t=0,state:n={}}){super(),a(this,d),a(this,l),o(this,"store",void 0),this.store=new s.ObservableStore({...u,...n}),c(this,l,p).call(this,e),c(this,d,f).call(this,t)}}function p(e){const t=this.store.getState().currentAppVersion;e!==t&&this.store.updateState({currentAppVersion:e,previousAppVersion:t})}function f(e){const t=this.store.getState().currentMigrationVersion;e!==t&&this.store.updateState({previousMigrationVersion:t,currentMigrationVersion:e})}n.default=h}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[80,{"../../../../../shared/constants/app":4178,"../../../../../shared/constants/network":4190,"../../../../../shared/modules/network.utils":4229,"@metamask/controller-utils":1094,"eth-rpc-errors":2897,lodash:3509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),i=e("lodash"),s=e("@metamask/controller-utils"),a=e("../../../../../shared/constants/app"),o=e("../../../../../shared/constants/network"),c=e("../../../../../shared/modules/network.utils");const u={methodNames:[a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN],implementation:async function(e,t,n,u,{getCurrentChainId:d,findNetworkConfigurationBy:h,findNetworkClientIdByChainId:p,setNetworkClientIdForDomain:f,setProviderType:m,setActiveNetwork:g,requestUserApproval:y,getProviderConfig:_,hasPermissions:b}){var w;if(null===(w=e.params)||void 0===w||!w[0]||"object"!=typeof e.params[0])return u(r.ethErrors.rpc.invalidParams({message:`Expected single, object parameter. Received:\n${JSON.stringify(e.params)}`}));const{origin:v}=e,{chainId:S}=e.params[0],E=Object.keys((0,i.omit)(e.params[0],["chainId"]));if(E.length>0)return u(r.ethErrors.rpc.invalidParams({message:`Received unexpected keys on object parameter. Unsupported keys:\n${E}`}));const T="string"==typeof S&&S.toLowerCase();if(!(0,c.isPrefixedFormattedHexString)(T))return u(r.ethErrors.rpc.invalidParams({message:`Expected 0x-prefixed, unpadded, non-zero hexadecimal string 'chainId'. Received:\n${S}`}));if(!(0,c.isSafeChainId)(parseInt(T,16)))return u(r.ethErrors.rpc.invalidParams({message:`Invalid chain ID "${T}": numerical value greater than max safe value. Received:\n${S}`}));const k={toNetworkConfiguration:l(T,h)};if(k.fromNetworkConfiguration=_(),k.toNetworkConfiguration){const n=d(),r=p(T);if(n===T)return b(e.origin)&&f(e.origin,r),t.result=null,u();try{const n=await y({origin:v,type:s.ApprovalType.SwitchEthereumChain,requestData:k});Object.values(o.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(T)?await m(n.type):await g(n.id),b(e.origin)&&f(e.origin,r),t.result=null}catch(e){return u(e)}return u()}return u(r.ethErrors.provider.custom({code:4902,message:`Unrecognized chain ID "${S}". Try adding the chain using ${a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN} first.`}))},hookNames:{getCurrentChainId:!0,findNetworkConfigurationBy:!0,findNetworkClientIdByChainId:!0,setNetworkClientIdForDomain:!0,setProviderType:!0,setActiveNetwork:!0,requestUserApproval:!0,getNetworkConfigurations:!0,getProviderConfig:!0,hasPermissions:!0}};n.default=u;function l(e,t){return Object.values(o.BUILT_IN_INFURA_NETWORKS).map((({chainId:e})=>e)).includes(e)?{chainId:e,ticker:o.CURRENCY_SYMBOLS.ETH,nickname:o.NETWORK_TO_NAME_MAP[e],rpcUrl:o.CHAIN_ID_TO_RPC_URL_MAP[e],type:o.CHAIN_ID_TO_TYPE_MAP[e]}:t({chainId:e})}}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/switch-ethereum-chain.js"}],[81,{"../../../../../shared/constants/app":4178,"@metamask/controller-utils":1094,"eth-rpc-errors":2897},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("@metamask/controller-utils"),i=e("eth-rpc-errors"),s=e("../../../../../shared/constants/app");const a={methodNames:[s.MESSAGE_TYPE.WATCH_ASSET,s.MESSAGE_TYPE.WATCH_ASSET_LEGACY],implementation:async function(e,t,n,s,{handleWatchAssetRequest:a}){try{const{params:{options:n,type:o},origin:c,networkClientId:u}=e,{tokenId:l}=n;return[r.ERC721,r.ERC1155].includes(o)&&l!==undefined&&"string"!=typeof l?s(i.ethErrors.rpc.invalidParams({message:`Expected parameter 'tokenId' to be type 'string'. Received type '${typeof l}'`})):(await a({asset:n,type:o,origin:c,networkClientId:u}),t.result=!0,s())}catch(e){return s(e)}},hookNames:{handleWatchAssetRequest:!0}};n.default=a}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/handlers/watch-asset.js"}],[82,{"./createMethodMiddleware":72},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./createMethodMiddleware");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}))}}},{package:"$root$",file:"app/scripts/lib/rpc-method-middleware/index.js"}],[83,{"../util":97,"@segment/loosely-validate-event":2071,buffer:2666,"is-retry-allowed":3307,lodash:3509,"remove-trailing-slash":3914,timers:4041},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t,r){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=u(e("remove-trailing-slash")),s=u(e("@segment/loosely-validate-event")),a=e("lodash"),o=u(e("is-retry-allowed")),c=e("../util");function u(e){return e&&e.__esModule?e:{default:e}}const l=()=>({});n.default=class{constructor(e,t={}){this.writeKey=e,this.host=(0,i.default)(t.host||"https://api.segment.io"),this.flushInterval=t.flushInterval||1e4,this.flushAt=t.flushAt||Math.max(t.flushAt,1)||20,this.queue=[],this.path="/v1/batch",this.maxQueueSize=460800,this.flushed=!1,this.retryCount=3,Object.defineProperty(this,"enable",{configurable:!1,writable:!1,enumerable:!0,value:!0})}_validate(e,t){(0,s.default)(e,t)}_message(e,t,n){return this._validate(t,e),this.enqueue(e,t,n),this}identify(e,t){return this._message("identify",e,t)}track(e,t){return this._message("track",e,t)}page(e,t){return this._message("page",e,t)}enqueue(e,t,n=l){if(!this.enable)return void r(n);const i={...t,type:e};if(i.context={...i.context,library:{name:"analytics-node"}},i.timestamp||(i.timestamp=new Date),i.messageId||(i.messageId=(0,c.generateRandomId)()),i.anonymousId&&!(0,a.isString)(i.anonymousId)&&(i.anonymousId=JSON.stringify(i.anonymousId)),i.userId&&!(0,a.isString)(i.userId)&&(i.userId=JSON.stringify(i.userId)),this.queue.push({message:i,callback:n}),!this.flushed)return this.flushed=!0,void this.flush();const s=this.queue.length>=this.flushAt,o=this.queue.reduce(((e,t)=>e+JSON.stringify(t).length),0)>=this.maxQueueSize;(s||o)&&this.flush(),this.flushInterval&&!this.timer&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))}flush(e=l){if(!this.enable)return r(e),Promise.resolve();if(this.timer&&(clearTimeout(this.timer),this.timer=null),!this.queue.length)return r(e),Promise.resolve();const n=this.queue.splice(0,this.flushAt),i=n.map((e=>e.callback)),s={batch:n.map((e=>e.message)),timestamp:new Date,sentAt:new Date},a={Authorization:`Basic ${t.from(this.writeKey,"utf8").toString("base64")}`};return this._sendRequest(`${this.host}${this.path}`,{method:"POST",body:JSON.stringify(s),headers:a},(t=>{r((()=>{i.forEach((e=>e(t,s))),e(t,s)}))}),0)}_retryRequest(e,t,n,r){const i=100*Math.pow(2,r);setTimeout((()=>{this._sendRequest(e,t,n,r+1)}),i)}async _sendRequest(e,t,n,r){return fetch(e,t).then((async i=>{if(i.ok)n();else if(this._isErrorRetryable({response:i})&&r<=this.retryCount)this._retryRequest(e,t,n,r);else{const e=new Error(i.statusText);n(e)}})).catch((i=>{this._isErrorRetryable(i)&&r<=this.retryCount?this._retryRequest(e,t,n,r):n(i)}))}_isErrorRetryable(e){return!!function(e){return!e.response&&Boolean(e.code)&&"ECONNABORTED"!==e.code&&(0,o.default)(e)}(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}}).call(this)}).call(this,e("buffer").Buffer,e("timers").setImmediate)}}},{package:"$root$",file:"app/scripts/lib/segment/analytics.js"}],[84,{"../../../../shared/constants/time":4201,"./analytics":83},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.segment=n.createSegmentMock=void 0;var r,i=e("../../../../shared/constants/time"),s=(r=e("./analytics"))&&r.__esModule?r:{default:r};const a="XdGJ17zKf3NjBPCDQ2UDjJjkx6FYBMGP",o=undefined,c=5*i.SECOND,u=(e=o)=>{const t={queue:[],flush(){t.queue.forEach((([e,t])=>{t()})),t.queue=[]},track(n,r=(()=>undefined)){t.queue.push([n,r]),t.queue.length>=e&&t.flush()},page(){},identify(){}};return t};n.createSegmentMock=u;n.segment=a?new s.default(a,{host:null,flushAt:o,flushInterval:c}):u(o)}}},{package:"$root$",file:"app/scripts/lib/segment/index.js"}],[88,{"./snap-keyring":90},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getAccountsBySnapId",{enumerable:!0,get:function(){return r.getAccountsBySnapId}}),Object.defineProperty(n,"snapKeyringBuilder",{enumerable:!0,get:function(){return r.snapKeyringBuilder}});var r=e("./snap-keyring")}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/index.ts"}],[89,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapAndHardwareInfoForMetrics=async function(e,t,n){var r,i,s;if(!n)return{};const a=n.call("AccountsController:getSelectedAccount"),o=a.address,{keyring:c}=a.metadata;let u;var l;null!==(r=a.metadata.snap)&&void 0!==r&&r.id&&(u=n.call("SnapController:get",null===(l=a.metadata.snap)||void 0===l?void 0:l.id));return{account_type:await e(o),device_model:await t(o),account_hardware_type:await async function(){var e;return null!=c&&null!==(e=c.type)&&void 0!==e&&e.includes("Hardware")?c.type:undefined}(),account_snap_type:null===(i=u)||void 0===i?void 0:i.id,account_snap_version:null===(s=u)||void 0===s?void 0:s.version}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/metrics.ts"}],[9,{"../../../shared/constants/alarms":4176,"../../../shared/constants/app":4178,"../../../shared/constants/preferences":4195,"../../../shared/constants/time":4201,"../../../shared/modules/mv3.utils":4228,"../../../ui/helpers/utils/build-types":4999,"../metamask-controller":98,"@metamask/controller-utils":1094,"@metamask/obs-store":1494,events:2968,loglevel:3515,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=m(e("events")),i=e("@metamask/obs-store"),s=e("uuid"),a=m(e("loglevel")),o=e("@metamask/controller-utils"),c=e("../metamask-controller"),u=e("../../../shared/constants/time"),l=e("../../../shared/constants/alarms"),d=e("../../../shared/modules/mv3.utils"),h=e("../../../ui/helpers/utils/build-types"),p=e("../../../shared/constants/app"),f=e("../../../shared/constants/preferences");function m(e){return e&&e.__esModule?e:{default:e}}class g extends r.default{constructor(e={}){const{addUnlockListener:t,isUnlocked:n,initState:r,onInactiveTimeout:s,preferencesStore:a,messenger:o,extension:c}=e;super(),this.extension=c,this.onInactiveTimeout=s||(()=>undefined),this.store=new i.ObservableStore({timeoutMinutes:f.DEFAULT_AUTO_LOCK_TIME_LIMIT,connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,browserEnvironment:{},popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[],recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),outdatedBrowserWarningLastShown:(new Date).getTime(),nftsDetectionNoticeDismissed:!1,showTestnetMessageInDropdown:!0,showBetaHeader:(0,h.isBeta)(),showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,trezorModel:null,currentPopupId:undefined,newPrivacyPolicyToastClickedOrClosed:null,newPrivacyPolicyToastShownDate:null,hadAdvancedGasFeesSetPriorToMigration92_3:!1,...r,qrHardware:{},nftsDropdownState:{},usedNetworks:{"0x1":!0,"0x5":!0,"0x539":!0},surveyLinkLastClickedOrClosed:null,signatureSecurityAlertResponses:{},switchedNetworkDetails:null,switchedNetworkNeverShowMessage:!1,currentExtensionPopupId:0}),this.timer=null,this.isUnlocked=n,this.waitingForUnlock=[],t(this.handleUnlock.bind(this)),a.subscribe((({preferences:e})=>{this.store.getState().timeoutMinutes!==e.autoLockTimeLimit&&this._setInactiveTimeout(e.autoLockTimeLimit)})),o.subscribe("KeyringController:qrKeyringStateChange",(e=>this.store.updateState({qrHardware:e})));const{preferences:u}=a.getState();this._setInactiveTimeout(u.autoLockTimeLimit),this.messagingSystem=o,this._approvalRequestId=null}getUnlockPromise(e){return new Promise((t=>{this.isUnlocked()?t():this.waitForUnlock(t,e)}))}waitForUnlock(e,t){this.waitingForUnlock.push({resolve:e}),this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE),t&&this._requestApproval()}handleUnlock(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;)this.waitingForUnlock.shift().resolve();this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}this._acceptApproval()}setDefaultHomeActiveTabName(e){this.store.updateState({defaultHomeActiveTabName:e})}setConnectedStatusPopoverHasBeenShown(){this.store.updateState({connectedStatusPopoverHasBeenShown:!0})}setRecoveryPhraseReminderHasBeenShown(){this.store.updateState({recoveryPhraseReminderHasBeenShown:!0})}setSurveyLinkLastClickedOrClosed(e){this.store.updateState({surveyLinkLastClickedOrClosed:e})}setNewPrivacyPolicyToastClickedOrClosed(){this.store.updateState({newPrivacyPolicyToastClickedOrClosed:!0})}setNewPrivacyPolicyToastShownDate(e){this.store.updateState({newPrivacyPolicyToastShownDate:e})}setRecoveryPhraseReminderLastShown(e){this.store.updateState({recoveryPhraseReminderLastShown:e})}setTermsOfUseLastAgreed(e){this.store.updateState({termsOfUseLastAgreed:e})}setSnapsInstallPrivacyWarningShownStatus(e){this.store.updateState({snapsInstallPrivacyWarningShown:e})}setOutdatedBrowserWarningLastShown(e){this.store.updateState({outdatedBrowserWarningLastShown:e})}setLastActiveTime(){this._resetTimer()}_setInactiveTimeout(e){this.store.updateState({timeoutMinutes:e}),this._resetTimer()}_resetTimer(){const{timeoutMinutes:e}=this.store.getState();this.timer?clearTimeout(this.timer):d.isManifestV3&&this.extension.alarms.clear(l.AUTO_LOCK_TIMEOUT_ALARM),e&&(d.isManifestV3?(this.extension.alarms.create(l.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:e,periodInMinutes:e}),this.extension.alarms.onAlarm.addListener((e=>{e.name===l.AUTO_LOCK_TIMEOUT_ALARM&&(this.onInactiveTimeout(),this.extension.alarms.clear(l.AUTO_LOCK_TIMEOUT_ALARM))}))):this.timer=setTimeout((()=>this.onInactiveTimeout()),e*u.MINUTE))}setBrowserEnvironment(e,t){this.store.updateState({browserEnvironment:{os:e,browser:t}})}addPollingToken(e,t){if(t!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const n=this.store.getState()[t];this.store.updateState({[t]:[...n,e]})}}removePollingToken(e,t){if(t!==p.POLLING_TOKEN_ENVIRONMENT_TYPES[p.ENVIRONMENT_TYPE_BACKGROUND]){const n=this.store.getState()[t];this.store.updateState({[t]:n.filter((t=>t!==e))})}}clearPollingTokens(){this.store.updateState({popupGasPollTokens:[],notificationGasPollTokens:[],fullScreenGasPollTokens:[]})}setShowTestnetMessageInDropdown(e){this.store.updateState({showTestnetMessageInDropdown:e})}setShowBetaHeader(e){this.store.updateState({showBetaHeader:e})}setShowPermissionsTour(e){this.store.updateState({showPermissionsTour:e})}setShowNetworkBanner(e){this.store.updateState({showNetworkBanner:e})}setShowAccountBanner(e){this.store.updateState({showAccountBanner:e})}setCurrentExtensionPopupId(e){this.store.updateState({currentExtensionPopupId:e})}setSwitchedNetworkDetails(e){this.store.updateState({switchedNetworkDetails:e})}clearSwitchedNetworkDetails(){this.store.updateState({switchedNetworkDetails:null})}setSwitchedNetworkNeverShowMessage(e){this.store.updateState({switchedNetworkDetails:null,switchedNetworkNeverShowMessage:e})}setTrezorModel(e){this.store.updateState({trezorModel:e})}updateNftDropDownState(e){this.store.updateState({nftsDropdownState:e})}setFirstTimeUsedNetwork(e){const t=this.store.getState(),{usedNetworks:n}=t;n[e]=!0,this.store.updateState({usedNetworks:n})}getSignatureSecurityAlertResponse(e){return this.store.getState().signatureSecurityAlertResponses[e]}addSignatureSecurityAlertResponse(e){const t=this.store.getState(),{signatureSecurityAlertResponses:n}=t;this.store.updateState({signatureSecurityAlertResponses:{...n,[e.securityAlertId]:e}})}setCurrentPopupId(e){this.store.updateState({currentPopupId:e})}getCurrentPopupId(){return this.store.getState().currentPopupId}_requestApproval(){this._approvalRequestId||(this._approvalRequestId=(0,s.v4)(),this.messagingSystem.call("ApprovalController:addRequest",{id:this._approvalRequestId,origin:p.ORIGIN_METAMASK,type:o.ApprovalType.Unlock},!0).catch((()=>{this._approvalRequestId=null})))}_acceptApproval(){if(this._approvalRequestId){try{this.messagingSystem.call("ApprovalController:acceptRequest",this._approvalRequestId)}catch(e){a.default.error("Failed to unlock approval request",e)}this._approvalRequestId=null}}}n.default=g}}},{package:"$root$",file:"app/scripts/controllers/app-state.js"}],[90,{"../../../../shared/constants/app":4178,"../../../../shared/constants/metametrics":4188,"../../../../ui/components/component-library/icon":4607,"../../translate":225,"./utils/isBlockedUrl":91,"./utils/showResult":92,"@metamask/eth-snap-keyring":1201,"webextension-polyfill":4162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.snapKeyringBuilder=n.getAccountsBySnapId=void 0;var r,i=e("@metamask/eth-snap-keyring"),s=(r=e("webextension-polyfill"))&&r.__esModule?r:{default:r},a=e("../../../../shared/constants/metametrics"),o=e("../../../../shared/constants/app"),c=e("../../translate"),u=e("../../../../ui/components/component-library/icon"),l=e("./utils/isBlockedUrl"),d=e("./utils/showResult");n.getAccountsBySnapId=async(e,t)=>{const n=await e.getSnapKeyring();return await n.getAccountsBySnapId(t)};n.snapKeyringBuilder=(e,t,n,r,h,p,f)=>{const m=()=>new i.SnapKeyring(t(),{addressExists:async t=>(await e.call("KeyringController:getAccounts")).includes(t.toLowerCase()),redirectUser:async(t,n,r)=>{if(n.length>0||r.length>0){const i=await(0,l.isBlockedUrl)(n,(async()=>await e.call("PhishingController:maybeUpdateState")),(t=>e.call("PhishingController:testOrigin",t))),a=await e.call("ApprovalController:addRequest",{origin:t,requestData:{url:n,message:r,isBlockedUrl:i},type:o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect},!0);Boolean(a)&&n.length>0?s.default.tabs.create({url:n}):console.log("User refused snap account redirection to:",n)}else console.log("Error occurred when redirecting snap account. url or message must be defined")},saveState:async()=>{await n()},addAccount:async(t,i,s)=>{const l=f(i),{id:h}=e.call("ApprovalController:startFlow"),m=e=>{p({event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:l}})},g="https://support.metamask.io/hc/en-us/articles/360015289452-How-to-add-accounts-in-your-wallet";let y=!1;try{if(y=Boolean(await e.call("ApprovalController:addRequest",{origin:i,type:o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation},!0)),!y)throw await s(y),new Error("User denied account creation");try{await s(y),await n(),r(t);const o=e.call("AccountsController:getAccountByAddress",t);if(!o)throw new Error(`Internal account not found for address: ${t}`);e.call("AccountsController:setSelectedAccount",o.id),m(a.MetaMetricsEventName.AddSnapAccountSuccessViewed),await(0,d.showSuccess)(e,i,{icon:u.IconName.UserCircleAdd,title:(0,c.t)("snapAccountCreated")},{message:(0,c.t)("snapAccountCreatedDescription"),address:t,learnMoreLink:g}),m(a.MetaMetricsEventName.AddSnapAccountSuccessClicked)}catch(t){const n=t.message;throw await(0,d.showError)(e,i,{icon:u.IconName.UserCircleAdd,title:(0,c.t)("snapAccountCreationFailed")},{message:(0,c.t)("snapAccountCreationFailedDescription",l),learnMoreLink:g,error:n}),m(a.MetaMetricsEventName.AccountAddFailed),new Error(`Error occurred while creating snap account: ${n}`)}}finally{y&&m(a.MetaMetricsEventName.AccountAdded),e.call("ApprovalController:endFlow",{id:h})}},removeAccount:async(t,r,i)=>{const s=f(r),{id:l}=e.call("ApprovalController:startFlow"),m="https://support.metamask.io/hc/en-us/articles/360057435092-How-to-remove-an-account-from-your-MetaMask-wallet",g=e=>{p({event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:r,snap_name:s}})};let y=!1;try{if(y=Boolean(await e.call("ApprovalController:addRequest",{origin:r,type:o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval,requestData:{publicAddress:t}},!0)),!y)throw await i(y),new Error("User denied account removal");try{await h(t),await i(y),await n(),g(a.MetaMetricsEventName.RemoveSnapAccountSuccessViewed),await(0,d.showError)(e,r,{icon:u.IconName.UserCircleRemove,title:(0,c.t)("snapAccountRemoved")},{message:(0,c.t)("snapAccountRemovedDescription"),learnMoreLink:m}),g(a.MetaMetricsEventName.RemoveSnapAccountSuccessClicked)}catch(t){const n=t.message;throw await(0,d.showError)(e,r,{icon:u.IconName.UserCircleRemove,title:(0,c.t)("snapAccountRemovalFailed")},{message:(0,c.t)("snapAccountRemovalFailedDescription",s),learnMoreLink:m,error:n}),g(a.MetaMetricsEventName.AccountRemoveFailed),new Error(`Error occurred while removing snap account: ${n}`)}}finally{y&&g(a.MetaMetricsEventName.AccountRemoved),e.call("ApprovalController:endFlow",{id:l})}}});return m.type=i.SnapKeyring.type,m}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/snap-keyring.ts"}],[91,{"../../keyring-snaps-permissions":58},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isBlockedUrl=void 0;var r=e("../../keyring-snaps-permissions");n.isBlockedUrl=async(e,t,n)=>{try{return!(0,r.isProtocolAllowed)(e)||(await t(),n(e).result)}catch(e){return console.error("Invalid URL passed into snap-keyring:",e),!1}}}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/isBlockedUrl.ts"}],[92,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.showSuccess=n.showError=void 0;const r=e=>({name:"SnapAuthorshipHeader",key:"snapHeader",properties:{snapId:e}});n.showError=(e,t,n,i)=>e.call("ApprovalController:showError",{header:[r(t)],title:n.title,icon:n.icon,error:{key:"snapAccountErrorMessage",name:"SnapAccountErrorMessage",properties:i}});n.showSuccess=(e,t,n,i)=>e.call("ApprovalController:showSuccess",{header:[r(t)],title:n.title,icon:n.icon,message:{key:"snapAccountSuccessMessage",name:"SnapAccountSuccessMessage",properties:i}})}}},{package:"$root$",file:"app/scripts/lib/snap-keyring/utils/showResult.ts"}],[94,{"../../../../shared/constants/app":4178,"../../../../shared/constants/gas":4183,"../../../../shared/constants/metametrics":4188,"../../../../shared/constants/transaction":4203,"../../../../shared/lib/transactions-controller-utils":4212,"../../../../shared/modules/conversion.utils":4218,"../../../../shared/modules/metametrics":4227,"../../../../shared/modules/transaction.utils":4240,"../../../../ui/helpers/utils/metrics":5009,"../snap-keyring/metrics":89,"@metamask/eth-query":1188,"@metamask/transaction-controller":1960,"bignumber.js":2571,"ethereumjs-util":2928},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handleTransactionSubmitted=n.handleTransactionRejected=n.handleTransactionFailed=n.handleTransactionDropped=n.handleTransactionConfirmed=n.handleTransactionApproved=n.handleTransactionAdded=n.handlePostTransactionBalanceUpdate=n.createTransactionEventFragmentWithTxId=n.METRICS_STATUS_FAILED=void 0;var r,i=e("ethereumjs-util"),s=(r=e("@metamask/eth-query"))&&r.__esModule?r:{default:r},a=e("bignumber.js"),o=e("@metamask/transaction-controller"),c=e("../../../../shared/constants/app"),u=e("../../../../shared/modules/transaction.utils"),l=e("../../../../shared/modules/conversion.utils"),d=e("../../../../shared/constants/transaction"),h=e("../../../../shared/constants/metametrics"),p=e("../../../../shared/constants/gas"),f=e("../../../../shared/lib/transactions-controller-utils"),m=e("../../../../ui/helpers/utils/metrics"),g=e("../../../../shared/modules/metametrics"),y=e("../snap-keyring/metrics");const _=n.METRICS_STATUS_FAILED="failed on-chain";n.handleTransactionAdded=async(e,t)=>{if(!t.transactionMeta)return;const{properties:n,sensitiveProperties:r}=await S({transactionEventPayload:t,transactionMetricsRequest:e});b({eventName:d.TransactionMetaMetricsEvent.added,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:n,sensitiveProperties:r}})};n.handleTransactionApproved=async(e,t)=>{t.transactionMeta&&await w({eventName:d.TransactionMetaMetricsEvent.approved,transactionEventPayload:t,transactionMetricsRequest:e})};n.handleTransactionFailed=async(e,t)=>{if(!t.transactionMeta)return;const n={};t.error&&(n.error=t.error),await w({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:n,transactionEventPayload:t,transactionMetricsRequest:e})};n.handleTransactionConfirmed=async(e,t)=>{if(0===Object.keys(t).length)return;const n={},r={...t},{txReceipt:i}=r;n.gas_used=null==i?void 0:i.gasUsed;const{submittedTime:s}=r;s&&(n.completion_time=function(e){return Math.round((Date.now()-e)/1e3).toString()}(s)),"0x0"===(null==i?void 0:i.status)&&(n.status=_),await w({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:n,transactionEventPayload:{actionId:r.actionId,transactionMeta:r},transactionMetricsRequest:e})};n.handleTransactionDropped=async(e,t)=>{if(!t.transactionMeta)return;await w({eventName:d.TransactionMetaMetricsEvent.finalized,extraParams:{dropped:!0},transactionEventPayload:t,transactionMetricsRequest:e})};n.handleTransactionRejected=async(e,t)=>{t.transactionMeta&&await w({eventName:d.TransactionMetaMetricsEvent.rejected,transactionEventPayload:t,transactionMetricsRequest:e})};n.handleTransactionSubmitted=async(e,t)=>{if(!t.transactionMeta)return;const{properties:n,sensitiveProperties:r}=await S({transactionEventPayload:t,transactionMetricsRequest:e});b({eventName:d.TransactionMetaMetricsEvent.submitted,transactionEventPayload:t,transactionMetricsRequest:e,payload:{properties:n,sensitiveProperties:r}})};n.createTransactionEventFragmentWithTxId=async(e,{transactionId:t,actionId:n})=>{const r={...e.getTransaction(t),actionId:n},{properties:i,sensitiveProperties:s}=await S({transactionEventPayload:{transactionMeta:r},transactionMetricsRequest:e});b({eventName:d.TransactionMetaMetricsEvent.approved,transactionEventPayload:{actionId:r.actionId,transactionMeta:r},transactionMetricsRequest:e,payload:{properties:i,sensitiveProperties:s}})};function b({eventName:e,transactionEventPayload:{transactionMeta:t,actionId:n},transactionMetricsRequest:r,payload:i}){if(function(e,t,n){const r=v(t,n.id);return void 0!==e(r)}(r.getEventFragmentById,e,t))return;const s=v(e,t.id);switch(e){case d.TransactionMetaMetricsEvent.added:r.createEventFragment({category:h.MetaMetricsEventCategory.Transactions,initialEvent:d.TransactionMetaMetricsEvent.added,successEvent:d.TransactionMetaMetricsEvent.approved,failureEvent:d.TransactionMetaMetricsEvent.rejected,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:n,uniqueIdentifier:s,persist:!0});break;case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.rejected:r.createEventFragment({category:h.MetaMetricsEventCategory.Transactions,successEvent:d.TransactionMetaMetricsEvent.approved,failureEvent:d.TransactionMetaMetricsEvent.rejected,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:n,uniqueIdentifier:s,persist:!0});break;case d.TransactionMetaMetricsEvent.submitted:r.createEventFragment({category:h.MetaMetricsEventCategory.Transactions,initialEvent:d.TransactionMetaMetricsEvent.submitted,successEvent:d.TransactionMetaMetricsEvent.finalized,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:n,uniqueIdentifier:s,persist:!0});break;case d.TransactionMetaMetricsEvent.finalized:r.createEventFragment({category:h.MetaMetricsEventCategory.Transactions,successEvent:d.TransactionMetaMetricsEvent.finalized,properties:i.properties,sensitiveProperties:i.sensitiveProperties,actionId:n,uniqueIdentifier:s,persist:!0})}}async function w({eventName:e,transactionEventPayload:t,transactionMetricsRequest:n,extraParams:r={}}){const{properties:i,sensitiveProperties:s}=await S({transactionEventPayload:t,transactionMetricsRequest:n,extraParams:r});b({eventName:e,transactionEventPayload:t,transactionMetricsRequest:n,payload:{properties:i,sensitiveProperties:s}}),function({eventName:e,transactionEventPayload:{transactionMeta:t},transactionMetricsRequest:n,payload:r}){const i=v(e,t.id);switch(e){case d.TransactionMetaMetricsEvent.approved:case d.TransactionMetaMetricsEvent.rejected:case d.TransactionMetaMetricsEvent.finalized:n.updateEventFragment(i,{properties:r.properties,sensitiveProperties:r.sensitiveProperties})}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:n,payload:{properties:i,sensitiveProperties:s}}),function({eventName:e,transactionMetricsRequest:t,transactionEventPayload:{transactionMeta:n}}){const r=v(e,n.id);switch(e){case d.TransactionMetaMetricsEvent.approved:t.finalizeEventFragment(r);break;case d.TransactionMetaMetricsEvent.rejected:t.finalizeEventFragment(r,{abandoned:!0});break;case d.TransactionMetaMetricsEvent.finalized:t.finalizeEventFragment(r)}}({eventName:e,transactionEventPayload:t,transactionMetricsRequest:n})}function v(e,t){return`transaction-${e===d.TransactionMetaMetricsEvent.finalized||e===d.TransactionMetaMetricsEvent.submitted?"submitted":"added"}-${t}`}async function S({transactionEventPayload:{transactionMeta:e},transactionMetricsRequest:t,extraParams:n={}}){var r;const{type:_,time:b,status:w,chainId:v,origin:S,txParams:{gasPrice:E,gas:T,maxFeePerGas:k,maxPriorityFeePerGas:M,estimateSuggested:A,estimateUsed:P},defaultGasEstimates:x,originalType:R,replacedById:C,customTokenAmount:I,dappProposedTokenAmount:O,currentTokenBalance:N,originalApprovalAmount:j,finalApprovalAmount:L,contractMethodName:D,securityProviderResponse:U,simulationFails:B}=e,q=new s.default(t.provider),F=S===c.ORIGIN_METAMASK?"user":"dapp",{assetType:$,tokenStandard:H}=await(0,u.determineTransactionAssetType)(e,q,t.getTokenStandardAndDetails),K={};if((0,u.isEIP1559Transaction)(e)?(K.max_fee_per_gas=k,K.max_priority_fee_per_gas=M):K.gas_price=E,x){var W,G;const{estimateType:n}=x;if(n){var z,Y;K.default_estimate=n;let r=null===(z=e.defaultGasEstimates)||void 0===z?void 0:z.maxFeePerGas,i=null===(Y=e.defaultGasEstimates)||void 0===Y?void 0:Y.maxPriorityFeePerGas;if([p.GasRecommendations.low,p.GasRecommendations.medium,p.GasRecommendations.high].includes(n)){var V,J;const{gasFeeEstimates:e}=await t.getEIP1559GasFeeEstimates();var Q,X;if(null!=e&&null!==(V=e[n])&&void 0!==V&&V.suggestedMaxFeePerGas)r=null===(Q=e[n])||void 0===Q?void 0:Q.suggestedMaxFeePerGas,K.default_max_fee_per_gas=r;if(null!=e&&null!==(J=e[n])&&void 0!==J&&J.suggestedMaxPriorityFeePerGas)i=null===(X=e[n])||void 0===X?void 0:X.suggestedMaxPriorityFeePerGas,K.default_max_priority_fee_per_gas=i}}null!==(W=e.defaultGasEstimates)&&void 0!==W&&W.gas&&(K.default_gas=e.defaultGasEstimates.gas),null!==(G=e.defaultGasEstimates)&&void 0!==G&&G.gasPrice&&(K.default_gas_price=e.defaultGasEstimates.gasPrice)}A&&(K.estimate_suggested=A),P&&(K.estimate_used=P),null!=n&&n.gas_used&&(K.gas_used=n.gas_used);const Z=function(e){const t={};for(const n in e)(0,i.isHexString)(e[n])?t[n]=(0,l.hexWEIToDecGWEI)(e[n]):t[n]=e[n];return t}(K);let ee="0";e.txParams.maxFeePerGas&&(ee="2");const te=_&&[o.TransactionType.contractInteraction,o.TransactionType.tokenMethodApprove,o.TransactionType.tokenMethodIncreaseAllowance,o.TransactionType.tokenMethodSafeTransferFrom,o.TransactionType.tokenMethodSetApprovalForAll,o.TransactionType.tokenMethodTransfer,o.TransactionType.tokenMethodTransferFrom,o.TransactionType.swap,o.TransactionType.swapApproval].includes(_),ne="Approve";let re,ie,se,ae,oe=o.TransactionType.simpleSend;_===o.TransactionType.cancel?oe=o.TransactionType.cancel:_===o.TransactionType.retry&&R?oe=R:_===o.TransactionType.deployContract?oe=o.TransactionType.deployContract:te&&(oe=o.TransactionType.contractInteraction,ie=D,ie===ne&&H===d.TokenStandard.ERC20&&("0"===O||"0"===I?re=d.TransactionApprovalAmountType.revoke:I&&I!==O?re=d.TransactionApprovalAmountType.custom:O&&(re=d.TransactionApprovalAmountType.dappProposed),se=function(e,t,n){if(e===d.TransactionApprovalAmountType.custom&&t&&n)return`${new a.BigNumber(t,10).div(n,10).times(100).round(2)}`;return null}(re,j,L),ae=function(e,t,n){if((e===d.TransactionApprovalAmountType.custom||e===d.TransactionApprovalAmountType.dappProposed)&&t&&n)return`${new a.BigNumber(t,16).div(n,10).times(100).round(2)}`;return null}(re,O,N)));const ce=t.getTransaction(C),ue={RETRY:o.TransactionType.retry,CANCEL:o.TransactionType.cancel,SAME_NONCE:"other"};let le;null!=n&&n.dropped&&(le=ue.SAME_NONCE,(null==ce?void 0:ce.type)===o.TransactionType.cancel?le=ue.CANCEL:(null==ce?void 0:ce.type)===o.TransactionType.retry&&(le=ue.RETRY));const de=[];1===(null==U?void 0:U.flagAsDangerous)?de.push(h.MetaMetricsEventUiCustomization.FlaggedAsMalicious):2===(null==U?void 0:U.flagAsDangerous)&&de.push(h.MetaMetricsEventUiCustomization.FlaggedAsSafetyUnknown);const he=(0,m.getBlockaidMetricsProps)(e);(null==he||null===(r=he.ui_customizations)||void 0===r?void 0:r.length)>0&&de.push(...he.ui_customizations),B&&de.push(h.MetaMetricsEventUiCustomization.GasEstimationFailed);const pe=(0,g.getSmartTransactionMetricsProperties)(t,e);let fe={chain_id:v,referrer:S,source:F,status:w,network:`${parseInt(v,16)}`,eip_1559_version:ee,gas_edit_type:"none",gas_edit_attempted:"none",gas_estimation_failed:Boolean(B),account_type:await t.getAccountType(t.getSelectedAddress()),device_model:await t.getDeviceModel(t.getSelectedAddress()),asset_type:$,token_standard:H,transaction_type:oe,transaction_speed_up:_===o.TransactionType.retry,...he,ui_customizations:de.length>0?de:null,...pe};const me=await(0,y.getSnapAndHardwareInfoForMetrics)(t.getAccountType,t.getDeviceModel,t.snapAndHardwareMessenger);Object.assign(fe,me),ie===ne&&(fe={...fe,transaction_approval_amount_type:re});let ge={transaction_envelope_type:(0,u.isEIP1559Transaction)(e)?f.TRANSACTION_ENVELOPE_TYPE_NAMES.FEE_MARKET:f.TRANSACTION_ENVELOPE_TYPE_NAMES.LEGACY,first_seen:b,gas_limit:T,transaction_contract_method:ie,transaction_replaced:le,...n,...Z};return ie===ne&&(ge={...ge,transaction_approval_amount_vs_balance_ratio:ae,transaction_approval_amount_vs_proposed_ratio:se}),{properties:fe,sensitiveProperties:ge}}n.handlePostTransactionBalanceUpdate=async({getParticipateInMetrics:e,trackEvent:t},{transactionMeta:n,approvalTransactionMeta:r})=>{var i;if(e()&&n.swapMetaData)if("0x0"===(null===(i=n.txReceipt)||void 0===i?void 0:i.status))t({event:"Swap Failed",sensitiveProperties:{...n.swapMetaData},category:h.MetaMetricsEventCategory.Swaps});else{var s;const e=(0,f.getSwapsTokensReceivedFromTxMeta)(n.destinationTokenSymbol,n,n.destinationTokenAddress,n.txParams.from,n.destinationTokenDecimals,r,n.chainId),i=e?`${new a.BigNumber(e,10).div(n.swapMetaData.token_to_amount,10).times(100).round(2)}%`:null,o=null!==(s=n.txReceipt)&&void 0!==s&&s.gasUsed&&n.swapMetaData.estimated_gas?`${new a.BigNumber(n.txReceipt.gasUsed,16).div(n.swapMetaData.estimated_gas,10).times(100).round(2)}%`:null,c=function(e,t){var n,r;let i="0x0";null!=t&&t.txReceipt&&(i=(0,f.calcGasTotal)(t.txReceipt.gasUsed,t.txReceipt.effectiveGasPrice));const s=(0,f.calcGasTotal)(null===(n=e.txReceipt)||void 0===n?void 0:n.gasUsed,null===(r=e.txReceipt)||void 0===r?void 0:r.effectiveGasPrice),o=new a.BigNumber(s,16).plus(i,16).toString(16);return{approvalGasCostInEth:Number((0,l.hexWEIToDecETH)(i)),tradeGasCostInEth:Number((0,l.hexWEIToDecETH)(s)),tradeAndApprovalGasCostInEth:Number((0,l.hexWEIToDecETH)(o))}}(n,r);t({event:h.MetaMetricsEventName.SwapCompleted,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...n.swapMetaData,token_to_amount_received:e,quote_vs_executionRatio:i,estimated_vs_used_gasRatio:o,approval_gas_cost_in_eth:c.approvalGasCostInEth,trade_gas_cost_in_eth:c.tradeGasCostInEth,trade_and_approval_gas_cost_in_eth:c.tradeAndApprovalGasCostInEth,token_to_amount:n.swapMetaData.token_to_amount.toString(10)}})}}}}},{package:"$root$",file:"app/scripts/lib/transaction/metrics.ts"}],[95,{"../../../../shared/constants/app":4178,"../../../../shared/constants/smartTransactions":4197,"../../../../shared/modules/conversion.utils":4218,"@metamask/smart-transactions-controller/dist/types":1646,loglevel:3515},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.submitSmartTransactionHook=void 0;var r,i=e("@metamask/smart-transactions-controller/dist/types"),s=(r=e("loglevel"))&&r.__esModule?r:{default:r},a=e("../../../../shared/modules/conversion.utils"),o=e("../../../../shared/constants/smartTransactions"),c=e("../../../../shared/constants/app");function u(e,t){d(e,t),t.add(e)}function l(e,t,n){d(e,t),t.set(e,n)}function d(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function p(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,m(e,t,"get"))}function f(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,m(e,t,"set"),n),n}function m(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var g=new WeakMap,y=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,S=new WeakMap,E=new WeakMap,T=new WeakMap,k=new WeakMap,M=new WeakMap,A=new WeakSet,P=new WeakSet,x=new WeakSet,R=new WeakSet,C=new WeakSet,I=new WeakSet,O=new WeakSet,N=new WeakSet;class j{constructor(e){u(this,N),u(this,O),u(this,I),u(this,C),u(this,R),u(this,x),u(this,P),u(this,A),l(this,g,{writable:!0,value:void 0}),l(this,y,{writable:!0,value:void 0}),l(this,_,{writable:!0,value:void 0}),l(this,b,{writable:!0,value:void 0}),l(this,w,{writable:!0,value:void 0}),l(this,v,{writable:!0,value:void 0}),l(this,S,{writable:!0,value:void 0}),l(this,E,{writable:!0,value:void 0}),l(this,T,{writable:!0,value:void 0}),l(this,k,{writable:!0,value:void 0}),l(this,M,{writable:!0,value:void 0});const{transactionMeta:t,smartTransactionsController:n,transactionController:r,isSmartTransaction:i,controllerMessenger:s,featureFlags:a}=e;f(this,y,""),f(this,g,!1),f(this,k,t),f(this,E,n),f(this,T,r),f(this,S,i),f(this,b,s),f(this,w,a),f(this,v,t.origin!==c.ORIGIN_METAMASK),f(this,_,t.chainId),f(this,M,t.txParams)}async submit(){const e={transactionHash:undefined};if(!p(this,S))return e;const{id:t}=await p(this,b).call("ApprovalController:startFlow");let n;f(this,y,t);try{n=await p(this,E).getFees({...p(this,M),chainId:p(this,_)},undefined)}catch(t){return s.default.error("Error in smart transaction publish hook, falling back to regular transaction submission",t),h(this,A,L).call(this),e}try{var r;const e=await h(this,I,F).call(this,{getFeesResponse:n}),t=null==e?void 0:e.uuid;if(!t)throw new Error("No smart transaction UUID");const i=null===(r=p(this,w))||void 0===r||null===(r=r.smartTransactions)||void 0===r?void 0:r.returnTxHashAsap;let s;if(h(this,P,D).call(this,{uuid:t}),h(this,R,B).call(this,{uuid:t}),s=i&&null!=e&&e.txHash?e.txHash:await h(this,C,q).call(this,{uuid:t}),null===s)throw new Error("Transaction does not have a transaction hash, there was a problem");return{transactionHash:s}}catch(e){throw s.default.error("Error in smart transaction publish hook",e),h(this,A,L).call(this),e}}}function L(){p(this,g)||(f(this,g,!0),p(this,b).call("ApprovalController:endFlow",{id:p(this,y)}))}function D({uuid:e}){const t=()=>{h(this,A,L).call(this)};p(this,b).call("ApprovalController:addRequest",{id:p(this,y),origin:origin,type:c.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage,requestState:{smartTransaction:{status:i.SmartTransactionStatuses.PENDING,creationTime:Date.now(),uuid:e},isDapp:p(this,v),txId:p(this,k).id}},!0).then(t,t)}async function U({smartTransaction:e}){return await p(this,b).call("ApprovalController:updateRequestState",{id:p(this,y),requestState:{smartTransaction:e,isDapp:p(this,v),txId:p(this,k).id}})}async function B({uuid:e}){p(this,E).eventEmitter.on(`${e}:smartTransaction`,(async e=>{const{status:t}=e;t&&t!==i.SmartTransactionStatuses.PENDING&&(p(this,g)||await h(this,x,U).call(this,{smartTransaction:e}))}))}function q({uuid:e}){return new Promise((t=>{p(this,E).eventEmitter.on(`${e}:smartTransaction`,(async e=>{const{status:n,statusMetadata:r}=e;n&&n!==i.SmartTransactionStatuses.PENDING&&(s.default.debug("Smart Transaction: ",e),null!=r&&r.minedHash?(s.default.debug("Smart Transaction - Received tx hash: ",null==r?void 0:r.minedHash),t(r.minedHash)):t(null))}))}))}async function F({getFeesResponse:e}){var t,n;const r=await h(this,N,H).call(this,(null===(t=e.tradeTxFees)||void 0===t?void 0:t.fees)??[],!1),i=await h(this,N,H).call(this,(null===(n=e.tradeTxFees)||void 0===n?void 0:n.cancelFees)||[],!0);return await p(this,E).submitSignedTransactions({signedTransactions:r,signedCanceledTransactions:i,txParams:p(this,M),transactionMeta:p(this,k)})}function $(e,t){const n={...p(this,M),maxFeePerGas:`0x${(0,a.decimalToHex)(e.maxFeePerGas)}`,maxPriorityFeePerGas:`0x${(0,a.decimalToHex)(e.maxPriorityFeePerGas)}`,gas:t?`0x${(0,a.decimalToHex)(o.CANCEL_GAS_LIMIT_DEC)}`:p(this,M).gas};return t&&(n.to=n.from,n.data="0x"),n}async function H(e,t){const n=e.map((e=>h(this,O,$).call(this,e,t))).map((e=>({...e,chainId:e.chainId||p(this,_)})));return await p(this,T).approveTransactionsWithSameNonce(n,{hasNonce:!0})}n.submitSmartTransactionHook=e=>new j(e).submit()}}},{package:"$root$",file:"app/scripts/lib/transaction/smart-transactions.ts"}],[96,{"../../../../shared/constants/security-provider":4196,"../ppom/ppom-middleware":69,"../ppom/ppom-util":70,"@metamask/keyring-api":1344,"@metamask/transaction-controller":1960,"@sentry/browser":2104,"ethereumjs-util":2928,uuid:4099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addDappTransaction=async function(e){const{dappRequest:t}=e,{id:n,method:r,origin:i}=t,{securityAlertResponse:s}=t,a={actionId:n,method:r,origin:i,requireApproval:!0,securityAlertResponse:s},{waitForHash:o}=await h({...e,transactionOptions:a});return await o()},n.addTransaction=async function(e,t){const{transactionParams:n,transactionOptions:r,ppomController:i,securityAlertsEnabled:a,chainId:p}=e,f=r.type&&d.includes(r.type);if(a&&c.SUPPORTED_CHAIN_IDS.includes(p)&&!f)try{const a=(0,l.normalizePPOMRequest)({method:"eth_sendTransaction",id:"actionId"in r?r.actionId:"",origin:"origin"in r?r.origin:"",params:[{from:n.from,to:n.to,value:n.value,data:n.data}]}),c=(0,o.v4)();i.usePPOM((async e=>{try{return await e.validateJsonRpc(a)}catch(e){(0,s.captureException)(e);const t=e;console.error("Error validating JSON RPC using PPOM: ",e);return{securityAlertId:c,result_type:u.BlockaidResultType.Errored,reason:u.BlockaidReason.errored,description:`${t.name}: ${t.message}`}}})).then((n=>{null==t||t(e.transactionOptions,{...n,securityAlertId:c})})),e.transactionOptions.securityAlertResponse={reason:u.BlockaidResultType.Loading,result_type:u.BlockaidReason.inProgress,securityAlertId:c}}catch(e){console.error("Error validating JSON RPC using PPOM: ",e),(0,s.captureException)(e)}const{transactionMeta:m,waitForHash:g}=await h(e);if(!e.waitForSubmit)return g().catch((()=>{})),m;const y=await g();return function(e,t){return t.state.transactions.find((t=>t.hash===e))}(y,e.transactionController)};var r=e("@metamask/keyring-api"),i=e("@metamask/transaction-controller"),s=e("@sentry/browser"),a=e("ethereumjs-util"),o=e("uuid"),c=e("../ppom/ppom-middleware"),u=e("../../../../shared/constants/security-provider"),l=e("../ppom/ppom-util");const d=[i.TransactionType.swap,i.TransactionType.swapApproval];async function h(e){const{selectedAccount:t}=e;return t.type===r.EthAccountType.Erc4337?async function(e){var t;const{networkClientId:n,transactionController:r,transactionOptions:i,transactionParams:s,userOperationController:o}=e,{maxFeePerGas:c,maxPriorityFeePerGas:u}=s,{origin:l,requireApproval:d,type:h}=i,f={...s,maxFeePerGas:(0,a.addHexPrefix)(c),maxPriorityFeePerGas:(0,a.addHexPrefix)(u)},m=null==i||null===(t=i.swaps)||void 0===t?void 0:t.meta;null!=m&&m.type&&delete m.type;const g={networkClientId:n,origin:l,requireApproval:d,swaps:m,type:h},y=await o.addUserOperationFromTransaction(f,g);o.startPollingByNetworkClientId(n);return{transactionMeta:p(y.id,r),waitForHash:y.transactionHash}}(e):async function(e){const{transactionController:t,transactionOptions:n,transactionParams:r,networkClientId:i}=e,{result:s,transactionMeta:a}=await t.addTransaction(r,{...n});return{transactionMeta:a,waitForHash:()=>s}}(e)}function p(e,t){return t.state.transactions.find((t=>t.id===e))}}}},{package:"$root$",file:"app/scripts/lib/transaction/util.ts"}]],[],{});